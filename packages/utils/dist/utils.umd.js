!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).WTJS={})}(this,(function(e){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:String(n)}function r(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var s=Object.prototype.toString;function l(e){return function(t){return s.call(t)==="[object ".concat(e,"]")}}var f={isNumber:l("Number"),isString:l("String"),isBoolean:l("Boolean"),isNull:l("Null"),isUndefined:l("Undefined"),isSymbol:l("Symbol"),isFunction:l("Function"),isObject:l("Object"),isArray:l("Array"),isProcess:l("process"),isWindow:l("Window")};function p(e,t){try{return e instanceof t}catch(e){return!1}}var d=f.isProcess("undefined"!=typeof process?process:0),y=f.isObject("undefined"!=typeof wx?wx:0)&&f.isFunction("undefined"!=typeof App?App:0),g=f.isWindow("undefined"!=typeof window?window:0);function h(){return g?window:y?wx:d?process:void 0}var b=h(),v=(b.__MITO__=b.__MITO__||{},b.__MITO__);var m="MITO Logger",O=function(){function e(){var t=this;if(a(this,e),r(this,"enabled",!1),r(this,"_console",{}),b.console=console||b.console,console||b.console){["log","debug","info","warn","error","assert"].forEach((function(e){e in b.console&&(t._console[e]=b.console[e])}))}}return u(e,[{key:"disable",value:function(){this.enabled=!1}},{key:"bindOptions",value:function(e){this.enabled=!!e}},{key:"enable",value:function(){this.enabled=!0}},{key:"getEnableStatus",value:function(){return this.enabled}},{key:"log",value:function(){var e;if(this.enabled){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this._console).log.apply(e,["".concat(m,"[Log]:")].concat(n))}}},{key:"warn",value:function(){var e;if(this.enabled){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this._console).warn.apply(e,["".concat(m,"[Warn]:")].concat(n))}}},{key:"error",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this._console).error.apply(e,["".concat(m,"[Error]:")].concat(n))}}]),e}(),w=v.logger||(v.logger=new O);function S(){return"undefined"==typeof document||null==document.location?"":document.location.href}function x(){return y?E():g?S():""}var j="<anonymous>";function N(){return Date.now()}function k(e,t){return s.call(e)==="[object ".concat(t,"]")}function A(e,t,n){return!!k(e,n)||(void 0!==e&&w.error("".concat(t,"期望传入:").concat(n,"类型，当前是:").concat(s.call(e),"类型")),!1)}function T(e,t){var n=[];return Object.keys(t).forEach((function(e){n.push("".concat(e,"=").concat(t[e]))})),e=-1!==e.indexOf("?")?"".concat(e,"&").concat(n.join("&")):"".concat(e,"?").concat(n.join("&"))}function E(){if(!f.isFunction(getCurrentPages))return"";var e=getCurrentPages();if(!e.length)return"App";var t=e.pop();return T(t.route,t.options)}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var U,F=function(){function e(){a(this,e),r(this,"micro",void 0),r(this,"stack",[]),r(this,"isFlushing",!1),"Promise"in b&&(this.micro=Promise.resolve())}return u(e,[{key:"addTask",value:function(e){var t=this;"function"==typeof e&&("Promise"in b?(this.stack.push(e),this.isFlushing||(this.isFlushing=!0,this.micro.then((function(){return t.flushStack()})))):e())}},{key:"clear",value:function(){this.stack=[]}},{key:"getStack",value:function(){return this.stack}},{key:"flushStack",value:function(){var e=this.stack.slice(0);this.stack.length=0,this.isFlushing=!1;var t,n=_(e);try{for(n.s();!(t=n.n()).done;){(0,t.value)()}}catch(e){n.e(e)}finally{n.f()}}}]),e}();e.Severity=void 0,(U=e.Severity||(e.Severity={})).Else="else",U.Error="error",U.Warning="warning",U.Info="info",U.Debug="debug",U.Low="low",U.Normal="normal",U.High="high",U.Critical="critical",function(e){e.fromString=function(t){switch(t){case"debug":return e.Debug;case"info":case"log":case"assert":return e.Info;case"warn":case"warning":return e.Warning;case e.Low:case e.Normal:case e.High:case e.Critical:case"error":return e.Error;default:return e.Else}}}(e.Severity||(e.Severity={}));var W={};function L(e){return Object.keys(e).sort().reduce((function(t,n){return f.isObject(e[n])?t[n]=L(e[n]):t[n]=e[n],t}),{})}function M(e){try{if(/\{.*\}/.test(e)){var t=JSON.parse(e);return t=L(t),JSON.stringify(t)}return e}catch(t){return e}}function D(e){return e.replace(/[?#].*$/,"").replace(/\/(\d+)\//g,"/{param}/$1").replace(/\/\d+([/]*$)/g,"/{param}$1")}function $(e){return e.replace(/(\S+)(\/Documents\/)(\S*)/,"$3")}function R(e){return e.replace(/(\S+)(\/#\/)(\S*)/,"$1")}function H(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t|=0}return t}e.Logger=O,e.Queue=F,e._global=b,e._support=v,e.createErrorId=function(e,t,n){var r;switch(e.type){case"HTTP":r=e.type+e.request.method+e.response.status+D(e.request.url)+t;break;case"JAVASCRIPT":case"VUE":case"REACT":r=e.type+e.name+e.message+t;break;case"LOG":r=e.customTag+e.type+e.name+t;break;case"PROMISE":r=function(e,t){var n=D(e.url);if("unhandledrejection"===e.name)return e.type+M(e.message)+t;return e.type+e.name+M(e.message)+n}(e,t);break;default:r=e.type+e.message+t}return r=H(r),W[r]>=n?null:("number"==typeof W[r]?W[r]++:W[r]=1,r)},e.defaultFunctionName=j,e.extractErrorStack=function(e,t){var n={time:N(),url:x(),name:e.name,level:t,message:e.message};if(void 0===e.stack||!e.stack)return n;for(var r,o,i,a=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,c=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,u=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,s=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,l=/\((\S*)(?::(\d+))(?::(\d+))\)/,f=e.stack.split("\n"),p=[],d=0,y=f.length;d<y;++d){if(o=a.exec(f[d])){var g=o[2]&&0===o[2].indexOf("native");o[2]&&0===o[2].indexOf("eval")&&(r=l.exec(o[2]))&&(o[2]=r[1],o[3]=r[2],o[4]=r[3]),i={url:g?null:o[2],func:o[1]||"UNKNOWN_FUNCTION",args:g?[o[2]]:[],line:o[3]?+o[3]:null,column:o[4]?+o[4]:null}}else if(o=u.exec(f[d]))i={url:o[2],func:o[1]||"UNKNOWN_FUNCTION",args:[],line:+o[3],column:o[4]?+o[4]:null};else{if(!(o=c.exec(f[d])))continue;o[3]&&o[3].indexOf(" > eval")>-1&&(r=s.exec(o[3]))?(o[3]=r[1],o[4]=r[2],o[5]=null):0!==d||o[5]||void 0===e.columnNumber||(p[0].column=e.columnNumber+1),i={url:o[3],func:o[1]||"UNKNOWN_FUNCTION",args:o[2]?o[2].split(","):[],line:o[4]?+o[4]:null,column:o[5]?+o[5]:null}}!i.func&&i.line&&(i.func="UNKNOWN_FUNCTION"),p.push(i)}return p.length?I(I({},n),{},{stack:p}):null},e.firstStrtoLowerCase=function(e){return e.replace(/\b(\w)(\w*)/g,(function(e,t,n){return"".concat(t.toLowerCase()).concat(n)}))},e.firstStrtoUppercase=function(e){return e.replace(/\b(\w)(\w*)/g,(function(e,t,n){return"".concat(t.toUpperCase()).concat(n)}))},e.fromHttpStatus=function(e){if(e<400)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"},e.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))},e.getAppId=function(){return wx.getAccountInfoSync().miniProgram.appId},e.getBigVersion=function(e){return Number(e.split(".")[0])},e.getBreadcrumbCategoryInBrowser=function(e){switch(e){case"Xhr":case"Fetch":return"http";case"UI.Click":case"Route":return"user";case"Customer":case"Console":return"debug";default:return"exception"}},e.getBreadcrumbCategoryInWx=function(e){switch(e){case"Xhr":return"http";case"Route":case"UI.Tap":case"UI.Touchmove":return"user";case"Customer":case"Console":return"debug";case"App On Launch":case"App On Show":case"App On Hide":case"Page On Load":case"Page On Show":case"Page On Ready":case"Page On Hide":case"Page On Share App Message":case"Page On Share Timeline":case"Page On Tab Item Tap":return"lifecycle";default:return"exception"}},e.getCurrentRoute=E,e.getFlutterRealOrigin=function(e){return R($(e))},e.getFlutterRealPath=$,e.getFunctionName=function(e){return e&&"function"==typeof e&&e.name||j},e.getGlobal=h,e.getLocationHref=S,e.getObjectWithForIn=function(e){if(!f.isObject(e))return e;var t={};for(var n in e)t[n]=e[n];return t},e.getRealPath=D,e.getTimestamp=N,e.getUrlWithEnv=x,e.hashCode=H,e.htmlElementAsString=function(e){var t=e.tagName.toLowerCase();if("body"===t)return null;var n=e.classList.value;n=""!==n?' class="'.concat(n,'"'):"";var r=e.id?' id="'.concat(e.id,'"'):"",o=e.innerText;return"<".concat(t).concat(r).concat(""!==n?n:"",">").concat(o,"</").concat(t,">")},e.interceptStr=function(e,t){return f.isString(e)?e.slice(0,t)+(e.length>t?";slice the first ".concat(t," characters"):""):""},e.isBrowserEnv=g,e.isEmpty=function(e){return f.isString(e)&&""===e.trim()||null==e},e.isEmptyObject=function(e){return f.isObject(e)&&0===Object.keys(e).length},e.isError=function(e){switch(s.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return p(e,Error)}},e.isExistProperty=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.isInclude=function(e,t){return!!~e.indexOf(t)},e.isInstanceOf=p,e.isNodeEnv=d,e.isType=l,e.isWxMiniEnv=y,e.logger=w,e.nativeToString=s,e.nativeTryCatch=function(e,t){try{e()}catch(e){console.error("err",e),t&&t(e)}},e.on=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.addEventListener(t,n,r)},e.parseErrorString=function(e){var t=e.split("\n");if(t.length<2)return null;-1!==t[0].indexOf("MiniProgramError")&&t.splice(0,1);var n=t.splice(0,1)[0],r=t.splice(0,1)[0].split(":")[0],o=[];return t.forEach((function(e){var t=/at\s+([\S]+)\s+\(/.exec(e),n=/\(([^)]+)\)/.exec(e);n||(n=/\s+at\s+(\S+)/.exec(e));var r=Array.isArray(t)&&t.length>0?t[1].trim():"",i=(Array.isArray(n)&&n.length>0?n[1]:"").split(":");o.push({args:[],func:r||"UNKNOWN_FUNCTION",column:Number(i.pop()),line:Number(i.pop()),url:i.join(":")})})),{message:n,name:r,stack:o}},e.parseUrlToObj=function(e){if(!e)return{};var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+r}},e.removeHashPath=R,e.replaceOld=function(e,t,n){if(void 0!==e&&(t in e||arguments.length>3&&void 0!==arguments[3]&&arguments[3])){var r=n(e[t]);"function"==typeof r&&(e[t]=r)}},e.safeStringify=function(e){var n=new Set,r=JSON.stringify(e,(function(e,r){return n.has(r)?"Circular":("object"===t(r)&&n.add(r),r)}));return n.clear(),r},e.setUrlQuery=T,e.silentConsoleScope=function(e){e()},e.sleepRun=function(e){setTimeout((function(){e()}),arguments.length>1&&void 0!==arguments[1]?arguments[1]:200)},e.sortObjByKey=L,e.stringToObjAndOrder=M,e.supportsHistory=function(){var e=b.chrome,t=e&&e.app&&e.app.runtime,n="history"in b&&!!b.history.pushState&&!!b.history.replaceState;return!t&&n},e.throttle=function(e,t){var n=!0;return function(){if(n){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];e.apply(this,o),n=!1,setTimeout((function(){n=!0}),t)}}},e.toStringAny=k,e.toStringValidateOption=A,e.unknownToString=function(e){return f.isString(e)?e:f.isUndefined(e)?"undefined":JSON.stringify(e)},e.validateOptionsAndSet=function(e){var t=this;e.forEach((function(e){var n=i(e,3),r=n[0],o=n[1];return A(r,o,n[2])&&(t[o]=r)}))},e.variableTypeDetection=f}));
//# sourceMappingURL=utils.umd.js.map
