{"version":3,"file":"core.esm.js","sources":["../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/typeof.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/createClass.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../../shared/src/config.ts","../../utils/src/is.ts","../../utils/src/global.ts","../../utils/src/logger.ts","../../utils/src/helpers.ts","../../utils/src/queue.ts","../../utils/src/Severity.ts","../../utils/src/errorId.ts","../src/breadcrumb.ts","../src/subscribe.ts","../../utils/src/exception.ts","../src/baseClient.ts","../src/baseOptions.ts","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/typeof.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/regeneratorRuntime.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/regenerator/index.js","../src/baseTransport.ts"],"sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : String(i);\n}","import _typeof from \"./typeof.js\";\nexport default function toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import { version } from '../package.json'\n\nexport const SDK_NAME = 'mitojs'\nexport const SDK_VERSION = version\n","import { ToStringTypes } from '@wtjs/shared'\n\nexport const nativeToString = Object.prototype.toString\nexport function isType(type: string) {\n  return function (value: any): boolean {\n    return nativeToString.call(value) === `[object ${type}]`\n  }\n}\n\n/**\n * 检测变量类型\n * @param type\n */\nexport const variableTypeDetection = {\n  isNumber: isType(ToStringTypes.Number),\n  isString: isType(ToStringTypes.String),\n  isBoolean: isType(ToStringTypes.Boolean),\n  isNull: isType(ToStringTypes.Null),\n  isUndefined: isType(ToStringTypes.Undefined),\n  isSymbol: isType(ToStringTypes.Symbol),\n  isFunction: isType(ToStringTypes.Function),\n  isObject: isType(ToStringTypes.Object),\n  isArray: isType(ToStringTypes.Array),\n  isProcess: isType(ToStringTypes.process),\n  isWindow: isType(ToStringTypes.Window)\n}\n\n/**\n * Checks whether given value's type is one of a few Error or Error-like\n * {../link isError}.\n *\n * ../param wat A value to be checked.\n * ../returns A boolean representing the result.\n */\nexport function isError(wat: any): boolean {\n  switch (nativeToString.call(wat)) {\n    case '[object Error]':\n      return true\n    case '[object Exception]':\n      return true\n    case '[object DOMException]':\n      return true\n    default:\n      return isInstanceOf(wat, Error)\n  }\n}\n\n/**\n * 检查是否是空对象\n *\n * @export\n * @param {Object} obj 待检测的对象\n * @return {*}  {boolean}\n */\nexport function isEmptyObject(obj: Object): boolean {\n  return variableTypeDetection.isObject(obj) && Object.keys(obj).length === 0\n}\n\n/**\n * 检测是否是空字符、undefined、null\n *\n * @export\n * @param {*} wat\n * @return {*}  {boolean}\n */\nexport function isEmpty(wat: any): boolean {\n  return (variableTypeDetection.isString(wat) && wat.trim() === '') || wat === undefined || wat === null\n}\n\n/**\n * Checks whether given value's type is an instance of provided constructor.\n * {../link isInstanceOf}.\n *\n * ../param wat A value to be checked.\n * ../param base A constructor to be used in a check.\n * ../returns A boolean representing the result.\n */\nexport function isInstanceOf(wat: any, base: any): boolean {\n  try {\n    // tslint:disable-next-line:no-unsafe-any\n    return wat instanceof base\n  } catch (_e) {\n    return false\n  }\n}\n\nexport function isExistProperty(obj: Object, key: string | number | symbol): boolean {\n  return Object.prototype.hasOwnProperty.call(obj, key)\n}\n","import { EventTypes } from '@wtjs/shared'\nimport { Logger } from './logger'\nimport { DeviceInfo } from '@wtjs/types'\nimport { variableTypeDetection } from './is'\n\n/**\n *MITO的全局变量\n *\n * @export\n * @interface MitoSupport\n */\nexport interface MitoSupport {\n  logger: Logger\n  replaceFlag: { [key in EventTypes]?: boolean }\n  record?: any[]\n  deviceInfo?: DeviceInfo\n}\n\ninterface MITOGlobal {\n  console?: Console\n  __MITO__?: MitoSupport\n}\n\nexport const isNodeEnv = variableTypeDetection.isProcess(typeof process !== 'undefined' ? process : 0)\n\nexport const isWxMiniEnv =\n//@ts-ignore\n  variableTypeDetection.isObject(typeof wx !== 'undefined' ? wx : 0) &&\n  //@ts-ignore\n  variableTypeDetection.isFunction(typeof App !== 'undefined' ? App : 0)\n\nexport const isBrowserEnv = variableTypeDetection.isWindow(typeof window !== 'undefined' ? window : 0)\n/**\n * 获取全局变量\n *\n * ../returns Global scope object\n */\nexport function getGlobal<T>() {\n  if (isBrowserEnv) return window as unknown as MITOGlobal & T\n  //@ts-ignore\n  if (isWxMiniEnv) return wx as unknown as MITOGlobal & T\n  // it's true when run e2e\n  if (isNodeEnv) return process as unknown as MITOGlobal & T\n}\n// whether it is right use &\n//@ts-ignore\nconst _global = getGlobal<Window & WechatMiniprogram.Wx>()\nconst _support = getGlobalMitoSupport()\n/**\n * 获取全局变量__MITO__的引用地址\n *\n * @return {*}  {MitoSupport}\n */\nfunction getGlobalMitoSupport(): MitoSupport {\n  _global.__MITO__ = _global.__MITO__ || ({} as MitoSupport)\n  return _global.__MITO__\n}\n\nexport { _global, _support }\n\n// _support.replaceFlag = _support.replaceFlag || {}\n// const replaceFlag = _support.replaceFlag\n// export function setFlag(replaceType: EventTypes, isSet: boolean): void {\n//   if (replaceFlag[replaceType]) return\n//   replaceFlag[replaceType] = isSet\n// }\n\n// export function getFlag(replaceType: EventTypes): boolean {\n//   return replaceFlag[replaceType] ? true : false\n// }\n\nexport function supportsHistory(): boolean {\n  // borrowed from: https://github.com/angular/angular.js/pull/13945/files\n  const chrome = (_global as any).chrome\n  const isChromePackagedApp = chrome && chrome.app && chrome.app.runtime\n  const hasHistoryApi = 'history' in _global && !!_global.history.pushState && !!_global.history.replaceState\n  return !isChromePackagedApp && hasHistoryApi\n}\n","import { _global, _support } from './global'\nconst PREFIX = 'MITO Logger'\n\nexport class Logger {\n  private enabled = false\n  private _console: Console = {} as Console\n  constructor() {\n    _global.console = console || _global.console\n    if (console || _global.console) {\n      const logType = ['log', 'debug', 'info', 'warn', 'error', 'assert']\n      logType.forEach((level) => {\n        if (!(level in _global.console)) return\n        this._console[level] = _global.console[level]\n      })\n    }\n  }\n  disable(): void {\n    this.enabled = false\n  }\n\n  bindOptions(debug: boolean): void {\n    this.enabled = debug ? true : false\n  }\n\n  enable(): void {\n    this.enabled = true\n  }\n\n  getEnableStatus() {\n    return this.enabled\n  }\n\n  log(...args: any[]): void {\n    if (!this.enabled) {\n      return\n    }\n    this._console.log(`${PREFIX}[Log]:`, ...args)\n  }\n  warn(...args: any[]): void {\n    if (!this.enabled) {\n      return\n    }\n    this._console.warn(`${PREFIX}[Warn]:`, ...args)\n  }\n\n  /**\n   * error不需要开启enable也要打印出来，提示用户错误信息\n   *\n   * @param {...any[]} args\n   * @memberof Logger\n   */\n  error(...args: any[]): void {\n    this._console.error(`${PREFIX}[Error]:`, ...args)\n  }\n}\n\nconst logger = _support.logger || (_support.logger = new Logger())\nexport { logger }\n","import { IAnyObject } from '@wtjs/types'\nimport { globalVar, ToStringTypes } from '@wtjs/shared'\nimport { logger } from './logger'\nimport { nativeToString, variableTypeDetection } from './is'\nimport { isWxMiniEnv, isBrowserEnv } from './global'\n\nexport function getLocationHref(): string {\n  if (typeof document === 'undefined' || document.location == null) return ''\n  return document.location.href\n}\n\nexport function getUrlWithEnv(): string {\n  if (isWxMiniEnv) return getCurrentRoute()\n  if (isBrowserEnv) return getLocationHref()\n  return ''\n}\n\n// 用到所有事件的名称\ntype TotalEventName = keyof GlobalEventHandlersEventMap | keyof XMLHttpRequestEventTargetEventMap | keyof WindowEventMap\n\n/**\n * 添加事件监听器\n *\n * @export\n * @param {{ addEventListener: Function }} target 目标对象\n * @param {TotalEventName} eventName 目标对象上的事件名\n * @param {Function} handler 回调函数\n * @param {(boolean | unknown)} [opitons=false] useCapture默认为false\n */\nexport function on(\n  target: { addEventListener: Function },\n  eventName: TotalEventName,\n  handler: Function,\n  opitons: boolean | unknown = false\n): void {\n  target.addEventListener(eventName, handler, opitons)\n}\n\n/**\n * 重写对象上面的某个属性\n *\n * @export\n * @param {IAnyObject} source 需要被重写的对象\n * @param {string} name 需要被重写对象的key\n * @param {(...args: any[]) => any} replacement 以原有的函数作为参数，执行并重写原有函数\n * @param {boolean} [isForced=false] 是否强制重写（可能原先没有该属性）\n */\nexport function replaceOld(source: IAnyObject, name: string, replacement: (...args: any[]) => any, isForced = false): void {\n  if (source === undefined) return\n  if (name in source || isForced) {\n    const original = source[name]\n    const wrapped = replacement(original)\n    if (typeof wrapped === 'function') {\n      source[name] = wrapped\n    }\n  }\n}\n\n/**\n * 用&分割对象，返回a=1&b=2\n * ../param obj 需要拼接的对象\n */\n// export function splitObjToQuery(obj: Record<string, unknown>): string {\n//   return Object.entries(obj).reduce((result, [key, value], index) => {\n//     if (index !== 0) {\n//       result += '&'\n//     }\n//     const valueStr = variableTypeDetection.isObject(value) || variableTypeDetection.isArray(value) ? JSON.stringify(value) : value\n//     result += `${key}=${valueStr}`\n//     return result\n//   }, '')\n// }\n\nexport const defaultFunctionName = '<anonymous>'\n/**\n * 需要获取函数名，匿名则返回<anonymous>\n * ../param {unknown} fn 需要获取函数名的函数本体\n * ../returns 返回传入的函数的函数名\n */\nexport function getFunctionName(fn: unknown): string {\n  if (!fn || typeof fn !== 'function') {\n    return defaultFunctionName\n  }\n  return fn.name || defaultFunctionName\n}\n\n// 函数防抖\n/**\n *\n * ../param fn 需要防抖的函数\n * ../param delay 防抖的时间间隔\n * ../param isImmediate 是否需要立即执行，默认为false，第一次是不执行的\n * ../returns 返回一个包含防抖功能的函数\n */\n// export const debounce = (fn: voidFun, delay: number, isImmediate = false): voidFun => {\n//   let timer = null\n//   return function (...args: any) {\n//     if (isImmediate) {\n//       fn.apply(this, args)\n//       isImmediate = false\n//       return\n//     }\n//     clearTimeout(timer)\n//     timer = setTimeout(() => {\n//       fn.apply(this, args)\n//     }, delay)\n//   }\n// }\n\n/**\n * 函数节流\n *\n * @export\n * @param {Function} fn 需要节流的函数\n * @param {number} delay 节流的时间间隔\n * @return {*}  {Function} 返回一个包含节流功能的函数\n */\nexport function throttle(fn: Function, delay: number): Function {\n  let canRun = true\n  return function (...args: any) {\n    if (!canRun) return\n    fn.apply(this, args)\n    canRun = false\n    setTimeout(() => {\n      canRun = true\n    }, delay)\n  }\n}\n\n/**\n * 原子字符中是否包含目标字符\n *\n * @export\n * @param {string} origin 原字符\n * @param {string} target 目标字符\n * @return {*}  {boolean}\n */\nexport function isInclude(origin: string, target: string): boolean {\n  return !!~origin.indexOf(target)\n}\n\n/**\n * 获取当前的时间戳\n *\n * @export\n * @return {*}  {number}\n */\nexport function getTimestamp(): number {\n  return Date.now()\n}\n\nexport function toStringAny(target: any, type: ToStringTypes): boolean {\n  return nativeToString.call(target) === `[object ${type}]`\n}\n\nexport function toStringValidateOption(target: any, targetName: string, expectType: ToStringTypes): boolean {\n  if (toStringAny(target, expectType)) return true\n  typeof target !== 'undefined' && logger.error(`${targetName}期望传入:${expectType}类型，当前是:${nativeToString.call(target)}类型`)\n  return false\n}\n\n/**\n * 如果用户输入console，并且logger是打开的会造成无限递归，执行callback前，会把监听console的行为关掉\n *\n * @export\n * @param {Function} callback\n */\nexport function silentConsoleScope(callback: Function) {\n  globalVar.isLogAddBreadcrumb = false\n  callback()\n  globalVar.isLogAddBreadcrumb = true\n}\n\nexport function generateUUID(): string {\n  let d = new Date().getTime()\n  const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = (d + Math.random() * 16) % 16 | 0\n    d = Math.floor(d / 16)\n    return (c == 'x' ? r : (r & 0x3) | 0x8).toString(16)\n  })\n  return uuid\n}\n\nexport function unknownToString(target: unknown): string {\n  if (variableTypeDetection.isString(target)) {\n    return target as string\n  }\n  if (variableTypeDetection.isUndefined(target)) {\n    return 'undefined'\n  }\n  return JSON.stringify(target)\n}\n\nexport function getBigVersion(version: string) {\n  return Number(version.split('.')[0])\n}\n\n/**\n * 给url添加query\n * @param url\n * @param query\n */\nexport function setUrlQuery(url: string, query: object) {\n  const queryArr = []\n  Object.keys(query).forEach((k) => {\n    queryArr.push(`${k}=${query[k]}`)\n  })\n  if (url.indexOf('?') !== -1) {\n    url = `${url}&${queryArr.join('&')}`\n  } else {\n    url = `${url}?${queryArr.join('&')}`\n  }\n  return url\n}\n\nexport function interceptStr(str: string, interceptLength: number): string {\n  if (variableTypeDetection.isString(str)) {\n    return str.slice(0, interceptLength) + (str.length > interceptLength ? `;slice the first ${interceptLength} characters` : '')\n  }\n  return ''\n}\n\n/**\n * 获取wx当前route的方法\n * 必须是在进入Page或Component构造函数内部才能够获取到currentPages\n * 否则都是在注册Page和Component时执行的代码，此时url默认返回'App'\n */\nexport function getCurrentRoute() {\n  //@ts-ignore\n  if (!variableTypeDetection.isFunction(getCurrentPages)) {\n    return ''\n  }\n  //@ts-ignore\n  const pages = getCurrentPages() // 在App里调用该方法，页面还没有生成，长度为0\n  if (!pages.length) {\n    return 'App'\n  }\n  const currentPage = pages.pop()\n  return setUrlQuery(currentPage.route, currentPage.options)\n}\n\n/**\n *将传入的字符串的首字母改为大写，其他不变\n *\n * @export\n * @param {string} str 原字符\n * @return {*}  {string}\n * @example xhr => Xhr\n */\nexport function firstStrtoUppercase(str: string): string {\n  return str.replace(/\\b(\\w)(\\w*)/g, function ($0: string, $1: string, $2: string) {\n    return `${$1.toUpperCase()}${$2}`\n  })\n}\n\n/**\n *将传入的字符串的首字母改为小写，其他不变\n *\n * @export\n * @param {string} str 原字符\n * @return {*}  {string}\n * @example Xhr => xhr\n */\nexport function firstStrtoLowerCase(str: string): string {\n  return str.replace(/\\b(\\w)(\\w*)/g, function ($0: string, $1: string, $2: string) {\n    return `${$1.toLowerCase()}${$2}`\n  })\n}\n\n/**\n * 安全的转换对象，包括循环引用，如果是循环引用就返回Circular\n *\n * @export\n * @param {object} obj 需要转换的对象\n * @return {*}  {string}\n */\nexport function safeStringify(obj: object): string {\n  const set = new Set()\n  const str = JSON.stringify(obj, function (_key, value) {\n    if (set.has(value)) {\n      return 'Circular'\n    }\n    typeof value === 'object' && set.add(value)\n    return value\n  })\n  set.clear()\n  return str\n}\n\n/**\n * 解决Vue3抛出的proxy对象循环引用的问题\n *\n * @export\n * @template T\n * @param {IAnyObject} obj\n * @return {*}  {T}\n */\nexport function getObjectWithForIn<T = IAnyObject>(obj: IAnyObject): T {\n  if (!variableTypeDetection.isObject(obj)) return obj as unknown as T\n  const result = {}\n  for (const key in obj) {\n    result[key] = obj[key]\n  }\n  return result as T\n}\n\nexport function validateOptionsAndSet(this: any, targetArr: [any, string, ToStringTypes][]) {\n  targetArr.forEach(\n    ([target, targetName, expectType]) => toStringValidateOption(target, targetName, expectType) && (this[targetName] = target)\n  )\n}\n\nexport function sleepRun(fn: () => void, delay = 200) {\n  setTimeout(() => {\n    fn()\n  }, delay)\n}\n","import { _global } from './global'\nexport class Queue {\n  private readonly micro: Promise<void>\n  private stack: any[] = []\n  private isFlushing = false\n  constructor() {\n    if (!('Promise' in _global)) return\n    this.micro = Promise.resolve()\n  }\n  addTask(fn: () => void): void {\n    if (typeof fn !== 'function') return\n    if (!('Promise' in _global)) {\n      fn()\n      return\n    }\n    this.stack.push(fn)\n    if (!this.isFlushing) {\n      this.isFlushing = true\n      this.micro.then(() => this.flushStack())\n    }\n  }\n  clear() {\n    this.stack = []\n  }\n  getStack() {\n    return this.stack\n  }\n  flushStack(): void {\n    const temp = this.stack.slice(0)\n    this.stack.length = 0\n    this.isFlushing = false\n    for (const fn of temp) {\n      fn()\n    }\n  }\n  // rollup queue\n}\n","/** 等级程度枚举 */\nexport enum Severity {\n  Else = 'else',\n  Error = 'error',\n  Warning = 'warning',\n  Info = 'info',\n  Debug = 'debug',\n  /** 上报的错误等级 */\n  Low = 'low',\n  Normal = 'normal',\n  High = 'high',\n  Critical = 'critical'\n}\n\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Severity {\n  /**\n   * Converts a string-based level into a {@link Severity}.\n   *\n   * @param level string representation of Severity\n   * @returns Severity\n   */\n  export function fromString(level: string): Severity {\n    switch (level) {\n      case 'debug':\n        return Severity.Debug\n      case 'info':\n      case 'log':\n      case 'assert':\n        return Severity.Info\n      case 'warn':\n      case 'warning':\n        return Severity.Warning\n      case Severity.Low:\n      case Severity.Normal:\n      case Severity.High:\n      case Severity.Critical:\n      case 'error':\n        return Severity.Error\n      default:\n        return Severity.Else\n    }\n  }\n}\n","import { ReportDataType } from '@wtjs/types'\nimport { BrowserEventTypes, ErrorTypes } from '@wtjs/shared'\nimport { variableTypeDetection } from './is'\nconst allErrorNumber: unknown = {}\n/**\n * generate error unique Id\n *\n * @export\n * @param {ReportDataType} data 上报的数据结构\n * @param {string} apikey 项目的唯一key\n * @param {number} maxDuplicateCount init配置项，最多可重复上报同一个错误的次数\n * @return {*}  {(number | null)}\n */\nexport function createErrorId(data: ReportDataType, apikey: string, maxDuplicateCount: number): number | null {\n  let id: any\n  switch (data.type) {\n    case ErrorTypes.HTTP:\n      id = data.type + data.request.method + data.response.status + getRealPath(data.request.url) + apikey\n      break\n    case ErrorTypes.JAVASCRIPT:\n    case ErrorTypes.VUE:\n    case ErrorTypes.REACT:\n      id = data.type + data.name + data.message + apikey\n      break\n    case ErrorTypes.LOG:\n      id = data.customTag + data.type + data.name + apikey\n      break\n    case ErrorTypes.PROMISE:\n      id = generatePromiseErrorId(data, apikey)\n      break\n    default:\n      id = data.type + data.message + apikey\n      break\n  }\n  id = hashCode(id)\n  if (allErrorNumber[id] >= maxDuplicateCount) {\n    return null\n  }\n  if (typeof allErrorNumber[id] === 'number') {\n    allErrorNumber[id]++\n  } else {\n    allErrorNumber[id] = 1\n  }\n\n  return id\n}\n/**\n * 如果是UNHANDLEDREJECTION，则按照项目apikey来生成\n * 如果是其他的，按照当前页面来生成\n * @param data\n * @param originUrl\n */\nfunction generatePromiseErrorId(data: ReportDataType, apikey: string) {\n  const locationUrl = getRealPath(data.url)\n  if (data.name === BrowserEventTypes.UNHANDLEDREJECTION) {\n    return data.type + stringToObjAndOrder(data.message) + apikey\n  }\n  return data.type + data.name + stringToObjAndOrder(data.message) + locationUrl\n}\n\nexport function sortObjByKey<T = object>(obj: T): T {\n  return Object.keys(obj)\n    .sort()\n    .reduce((total, key) => {\n      if (variableTypeDetection.isObject(obj[key])) {\n        total[key] = sortObjByKey(obj[key])\n      } else {\n        total[key] = obj[key]\n      }\n      return total\n    }, {}) as T\n}\n\n/**\n * sort object keys\n * ../param reason promise.reject\n */\nexport function stringToObjAndOrder(reason: string) {\n  try {\n    if (/\\{.*\\}/.test(reason)) {\n      let obj = JSON.parse(reason)\n      obj = sortObjByKey(obj)\n      return JSON.stringify(obj)\n    }\n    return reason\n  } catch (error) {\n    return reason\n  }\n}\n\n/**\n *\n * 获取去掉query后的地主\n * @export\n * @param {string} url 地址\n * @return {*}  {string}\n * @example http://.../project?id=1#a => http://.../project  http://.../id/123=> http://.../id/{param}\n */\nexport function getRealPath(url: string): string {\n  return url\n    .replace(/[?#].*$/, '')\n    .replace(/\\/(\\d+)\\//g, '/{param}/$1')\n    .replace(/\\/\\d+([/]*$)/g, '/{param}$1')\n}\n\n/**\n *\n * @param url\n */\nexport function getFlutterRealOrigin(url: string): string {\n  // for apple\n  return removeHashPath(getFlutterRealPath(url))\n}\n\n/**\n * 获取flutter的原始地址：每个用户的文件夹hash不同\n * @param url\n */\nexport function getFlutterRealPath(url: string): string {\n  // for apple\n  return url.replace(/(\\S+)(\\/Documents\\/)(\\S*)/, `$3`)\n}\n\nexport function removeHashPath(url: string): string {\n  return url.replace(/(\\S+)(\\/#\\/)(\\S*)/, `$1`)\n}\n\n/**\n * 根据字符串生成hashcode\n *\n * @export\n * @param {string} str\n * @return {*}  {number} 可为正数和负数\n */\nexport function hashCode(str: string): number {\n  let hash = 0\n  if (str.length == 0) return hash\n  for (let i = 0; i < str.length; i++) {\n    const char = str.charCodeAt(i)\n    hash = (hash << 5) - hash + char\n    hash = hash & hash\n  }\n  return hash\n}\n","import { ToStringTypes } from '@wtjs/shared'\nimport { logger, getTimestamp, silentConsoleScope, toStringValidateOption } from '@wtjs/utils'\nimport { BaseOptionsFieldsIntegrationType, BreadcrumbPushData } from '@wtjs/types'\n\n/**\n * 用户行为栈存储，实体类\n *\n * @export\n * @class Breadcrumb\n * @template O\n */\nexport class Breadcrumb<O extends BaseOptionsFieldsIntegrationType = BaseOptionsFieldsIntegrationType> {\n  private maxBreadcrumbs = 10\n  private beforePushBreadcrumb: unknown = null\n  private stack: BreadcrumbPushData[] = []\n  constructor(options: Partial<O> = {}) {\n    this.bindOptions(options)\n  }\n  /**\n   * 添加用户行为栈\n   *\n   * @param {BreadcrumbPushData} data\n   * @memberof Breadcrumb\n   */\n  push(data: BreadcrumbPushData): BreadcrumbPushData[] {\n    if (typeof this.beforePushBreadcrumb === 'function') {\n      let result: BreadcrumbPushData = null\n      const beforePushBreadcrumb = this.beforePushBreadcrumb\n      silentConsoleScope(() => {\n        result = beforePushBreadcrumb.call(this, this, data)\n      })\n      if (!result) return this.stack\n      return this.immediatePush(result)\n    }\n    return this.immediatePush(data)\n  }\n\n  private immediatePush(data: BreadcrumbPushData): BreadcrumbPushData[] {\n    data.time || (data.time = getTimestamp())\n    if (this.stack.length >= this.maxBreadcrumbs) {\n      this.shift()\n    }\n    this.stack.push(data)\n    // make sure xhr fetch is behind button click\n    this.stack.sort((a, b) => a.time - b.time)\n    logger.log(this.stack)\n    return this.stack\n  }\n\n  private shift(): boolean {\n    return this.stack.shift() !== undefined\n  }\n\n  clear(): void {\n    this.stack = []\n  }\n\n  getStack(): BreadcrumbPushData[] {\n    return this.stack\n  }\n\n  bindOptions(options: Partial<O> = {}): void {\n    const { maxBreadcrumbs, beforePushBreadcrumb } = options\n    toStringValidateOption(maxBreadcrumbs, 'maxBreadcrumbs', ToStringTypes.Number) && (this.maxBreadcrumbs = maxBreadcrumbs)\n    toStringValidateOption(beforePushBreadcrumb, 'beforePushBreadcrumb', ToStringTypes.Function) &&\n      (this.beforePushBreadcrumb = beforePushBreadcrumb)\n  }\n}\n","import { getFunctionName, logger, nativeTryCatch } from '@wtjs/utils'\n\ntype MonitorCallback = (data: any) => void\n/**\n * 发布订阅类\n *\n * @export\n * @class Subscribe\n * @template T 事件枚举\n */\nexport class Subscribe<T> {\n  dep: Map<T, MonitorCallback[]> = new Map()\n  constructor() {}\n  watch(eventName: T, callBack: (data: any) => any) {\n    const fns = this.dep.get(eventName)\n    if (fns) {\n      this.dep.set(eventName, fns.concat(callBack))\n      return\n    }\n    this.dep.set(eventName, [callBack])\n  }\n  notify<D = any>(eventName: T, data: D) {\n    const fns = this.dep.get(eventName)\n    if (!eventName || !fns) return\n    fns.forEach((fn) => {\n      nativeTryCatch(\n        () => {\n          fn(data)\n        },\n        (e: Error) => {\n          logger.error(`Subscribe.notify：监听事件的回调函数发生错误\\neventName:${eventName}\\nName: ${getFunctionName(fn)}\\nError: ${e}`)\n        }\n      )\n    })\n  }\n}\n","/**\n * 原生try函数\n * ../param fn try中执行的函数体\n * ../param errorFn 报错时执行的函数体，将err传入\n */\nexport function nativeTryCatch(fn: () => void, errorFn?: (err: any) => void): void {\n  try {\n    fn()\n  } catch (err) {\n    console.error('err', err)\n    if (errorFn) {\n      errorFn(err)\n    }\n  }\n}\n","import { EventTypes, SDK_VERSION } from '@wtjs/shared'\nimport { BaseClientType, BaseOptionsFieldsIntegrationType, BasePluginType, LogTypes } from '@wtjs/types'\nimport { logger } from '@wtjs/utils'\nimport { BaseTransport, Breadcrumb } from '.'\nimport { Subscribe } from './subscribe'\n\n/**\n * 抽象客户端，已实现插件和钩子函数的定义\n * 如果目前的钩子函数满足不了业务，需要在use中额外添加钩子，并在各个端实现\n *\n * @export\n * @abstract\n * @class BaseClient\n * @implements {BaseClientType}\n * @template O\n * @template E\n */\nexport abstract class BaseClient<\n  O extends BaseOptionsFieldsIntegrationType = BaseOptionsFieldsIntegrationType,\n  E extends EventTypes = EventTypes\n> implements BaseClientType\n{\n  SDK_NAME: string\n  SDK_VERSION = SDK_VERSION\n  options: BaseOptionsFieldsIntegrationType\n  abstract breadcrumb: Breadcrumb\n  abstract transport: BaseTransport\n  constructor(options: O) {\n    this.options = options\n    logger.bindOptions(options.debug)\n  }\n\n  /**\n   * 引用插件\n   *\n   * @param {BasePluginType<E>[]} plugins\n   * @memberof BaseClient\n   */\n  use(plugins: BasePluginType<E>[]) {\n    if (this.options.disabled) return\n    // 新建发布订阅实例\n    const subscribe = new Subscribe<E>()\n    plugins.forEach((item) => {\n      if (!this.isPluginEnable(item.name)) return\n      // 调用插件中的monitor并将发布函数传入\n      item.monitor.call(this, subscribe.notify.bind(subscribe))\n      const wrapperTransform = (...args: any[]) => {\n        // 先执行transform\n        const res = item.transform?.apply(this, args)\n        // 拿到transform返回的数据并传入\n        item.consumer?.call(this, res)\n        // 如果需要新增hook，可在这里添加逻辑\n      }\n      // 订阅插件中的名字，并传入回调函数\n      subscribe.watch(item.name, wrapperTransform)\n    })\n  }\n  getOptions() {\n    return this.options\n  }\n\n  /**\n   * 判断当前插件是否启用，每个端的可选字段不同，需要子类实现\n   *\n   * @abstract\n   * @param {EventTypes} name\n   * @return {*}  {boolean}\n   * @memberof BaseClient\n   */\n  abstract isPluginEnable(name: EventTypes): boolean\n\n  /**\n   * 手动上报方法，每个端需要自己实现\n   *\n   * @abstract\n   * @param {LogTypes} data\n   * @memberof BaseClient\n   */\n  abstract log(data: LogTypes): void\n}\n","import { ToStringTypes } from '@wtjs/shared'\nimport { BaseOptionsFieldsIntegrationType, BaseOptionsType, VueInstance } from '@wtjs/types'\nimport { generateUUID, validateOptionsAndSet } from '@wtjs/utils'\n\n/**\n * 公用的基础配置项绑定\n *\n * @export\n * @class BaseOptions\n * @implements {BaseOptionsType<O>}\n * @template O\n */\nexport class BaseOptions<O extends BaseOptionsFieldsIntegrationType = BaseOptionsFieldsIntegrationType> implements BaseOptionsType<O> {\n  enableTraceId = false\n  filterXhrUrlRegExp: RegExp\n  includeHttpUrlTraceIdRegExp = /.*/\n  traceIdFieldName = 'Trace-Id'\n  throttleDelayTime = 0\n  beforeAppAjaxSend = null\n  vue: VueInstance = null\n  constructor() {}\n  bindOptions(options: O) {\n    const { enableTraceId, vue, filterXhrUrlRegExp, traceIdFieldName, throttleDelayTime, includeHttpUrlTraceIdRegExp, beforeAppAjaxSend } =\n      options\n    const optionArr = [\n      [enableTraceId, 'enableTraceId', ToStringTypes.Boolean],\n      [traceIdFieldName, 'traceIdFieldName', ToStringTypes.String],\n      [throttleDelayTime, 'throttleDelayTime', ToStringTypes.Number],\n      [filterXhrUrlRegExp, 'filterXhrUrlRegExp', ToStringTypes.RegExp],\n      [includeHttpUrlTraceIdRegExp, 'includeHttpUrlTraceIdRegExp', ToStringTypes.RegExp],\n      [beforeAppAjaxSend, 'beforeAppAjaxSend', ToStringTypes.Function]\n    ]\n    validateOptionsAndSet.call(this, optionArr)\n    // for vue\n    this.vue = vue\n  }\n  isFilterHttpUrl(url: string): boolean {\n    return this.filterXhrUrlRegExp && this.filterXhrUrlRegExp.test(url)\n  }\n  setTraceId(httpUrl: string, callback: (headerFieldName: string, traceId: string) => void) {\n    const { includeHttpUrlTraceIdRegExp, enableTraceId } = this\n    if (enableTraceId && includeHttpUrlTraceIdRegExp && includeHttpUrlTraceIdRegExp.test(httpUrl)) {\n      const traceId = generateUUID()\n      callback(this.traceIdFieldName, traceId)\n    }\n  }\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return e;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function define(t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function value(t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw new Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(_typeof(e) + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function complete(t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function finish(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    \"catch\": function _catch(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","import { logger, Queue, isInclude, createErrorId, isEmpty, validateOptionsAndSet } from '@wtjs/utils'\nimport { SDK_NAME, SDK_VERSION, ToStringTypes } from '@wtjs/shared'\nimport { AuthInfo, BaseOptionsFieldsIntegrationType, BreadcrumbPushData, ReportDataType, TransportDataType } from '@wtjs/types'\n\n/**\n * 传输数据抽象类\n *\n * @export\n * @abstract\n * @class BaseTransport\n * @template O\n */\nexport abstract class BaseTransport<O extends BaseOptionsFieldsIntegrationType = BaseOptionsFieldsIntegrationType> {\n  apikey = ''\n  dsn = ''\n  queue: Queue\n  beforeDataReport: Promise<TransportDataType | null | undefined | boolean> | TransportDataType | any | null | undefined | boolean = null\n  backTrackerId: unknown = null\n  configReportUrl: unknown = null\n  maxDuplicateCount = 3\n  constructor() {\n    this.queue = new Queue()\n  }\n\n  /**\n   * 获取当前SDK信息\n   *\n   * @return {*}  {AuthInfo}\n   * @memberof BaseTransport\n   */\n  getAuthInfo(): AuthInfo {\n    const trackerId = this.getTrackerId()\n    const result: AuthInfo = {\n      trackerId: String(trackerId),\n      sdkVersion: SDK_VERSION,\n      sdkName: SDK_NAME,\n      apikey: this.apikey\n    }\n    return result\n  }\n\n  /**\n   * 获取hooks中返回的trackId，没有就返回''\n   *\n   * @return {*}  {(string | number)}\n   * @memberof BaseTransport\n   */\n  getTrackerId(): string | number {\n    if (typeof this.backTrackerId === 'function') {\n      const trackerId = this.backTrackerId()\n      if (typeof trackerId === 'string' || typeof trackerId === 'number') {\n        return trackerId\n      } else {\n        logger.error(`trackerId:${trackerId} 期望 string 或 number 类型，但是传入 ${typeof trackerId}`)\n      }\n    }\n    return ''\n  }\n\n  /**\n   * 判断当前url是不是你配置的dsn\n   *\n   * @param {string} targetUrl\n   * @return {*}  {boolean}\n   * @memberof BaseTransport\n   */\n  isSelfDsn(targetUrl: string): boolean {\n    return this.dsn && isInclude(targetUrl, this.dsn)\n  }\n\n  /**\n   * 绑定配置项\n   *\n   * @param {Partial<O>} [options={}]\n   * @memberof BaseTransport\n   */\n  bindOptions(options: Partial<O> = {}): void {\n    const { dsn, beforeDataReport, apikey, maxDuplicateCount, backTrackerId, configReportUrl } = options\n    const functionType = ToStringTypes.Function\n    const optionArr = [\n      [apikey, 'apikey', ToStringTypes.String],\n      [dsn, 'dsn', ToStringTypes.String],\n      [maxDuplicateCount, 'maxDuplicateCount', ToStringTypes.Number],\n      [beforeDataReport, 'beforeDataReport', functionType],\n      [backTrackerId, 'backTrackerId', functionType],\n      [configReportUrl, 'configReportUrl', functionType]\n    ]\n    validateOptionsAndSet.call(this, optionArr)\n  }\n\n  /**\n   * 发送数据到服务端\n   *\n   * @param {*} data\n   * @param {BreadcrumbPushData[]} breadcrumb\n   * @return {*}\n   * @memberof BaseTransport\n   */\n  async send(data: any, breadcrumb: BreadcrumbPushData[] = []): Promise<void> {\n    // 如果是埋点则不需要生成errorId\n    if (!data.isTrack) {\n      const errorId = createErrorId(data, this.apikey, this.maxDuplicateCount)\n      if (!errorId) return\n      data.errorId = errorId\n    }\n    let transportData = {\n      ...this.getTransportData(data),\n      breadcrumb\n    }\n    if (typeof this.beforeDataReport === 'function') {\n      transportData = await this.beforeDataReport(transportData)\n      if (!transportData) return\n    }\n    let dsn = this.dsn\n    if (isEmpty(dsn)) {\n      logger.error('dsn is empty,pass in when initializing please')\n      return\n    }\n    if (typeof this.configReportUrl === 'function') {\n      dsn = this.configReportUrl(transportData, dsn)\n      if (!dsn) return\n    }\n    return this.sendToServer(transportData, dsn)\n  }\n\n  /**\n   * post方式，子类需要重写\n   *\n   * @abstract\n   * @param {(TransportDataType | any)} data\n   * @param {string} url\n   * @memberof BaseTransport\n   */\n  abstract post(data: TransportDataType | any, url: string): void\n  /**\n   * 最终上报到服务器的方法，需要子类重写\n   *\n   * @abstract\n   * @param {(TransportDataType | any)} data\n   * @param {string} url\n   * @memberof BaseTransport\n   */\n  abstract sendToServer(data: TransportDataType | any, url: string): void\n  /**\n   * 获取上报的格式\n   *\n   * @abstract\n   * @param {ReportDataType} data\n   * @return {TransportDataType}  {TransportDataType}\n   * @memberof BaseTransport\n   */\n  abstract getTransportData(data: ReportDataType): TransportDataType\n}\n"],"names":["_classCallCheck","instance","Constructor","TypeError","_typeof","o","Symbol","iterator","constructor","prototype","toPropertyKey","t","i","r","e","toPrimitive","call","String","Number","_defineProperties","target","props","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_defineProperty","obj","value","_arrayLikeToArray","arr","len","arr2","Array","_slicedToArray","isArray","arrayWithHoles","l","n","u","a","f","next","done","push","iterableToArrayLimit","minLen","arrayLikeToArray","toString","slice","name","from","test","unsupportedIterableToArray","nonIterableRest","SDK_VERSION","nativeToString","isType","type","concat","variableTypeDetection","isNumber","isString","isBoolean","isNull","isUndefined","isSymbol","isFunction","isObject","isProcess","isWindow","isNodeEnv","process","isWxMiniEnv","wx","App","_global","window","_support","__MITO__","PREFIX","Logger","_this","this","console","forEach","level","_console","enabled","debug","_this$_console","_len","arguments","args","_key","log","apply","_this$_console2","_len2","_key2","warn","_this$_console3","_len3","_key3","error","logger","defaultFunctionName","toStringValidateOption","targetName","expectType","toStringAny","validateOptionsAndSet","targetArr","_ref","_ref2","Severity","Queue","micro","Promise","resolve","fn","stack","isFlushing","then","flushStack","temp","_step","_iterator","_createForOfIteratorHelper","s","err","fromString","Debug","Info","Warning","Low","Normal","High","Critical","Error","Else","allErrorNumber","createErrorId","data","apikey","maxDuplicateCount","id","request","method","response","status","getRealPath","url","message","customTag","locationUrl","stringToObjAndOrder","generatePromiseErrorId","str","hash","charCodeAt","hashCode","sortObjByKey","keys","sort","reduce","total","reason","JSON","parse","stringify","replace","Breadcrumb","options","bindOptions","beforePushBreadcrumb","result","callback","immediatePush","time","Date","now","maxBreadcrumbs","shift","b","undefined","Subscribe","Map","eventName","callBack","fns","dep","get","set","errorFn","nativeTryCatch","getFunctionName","BaseClient","plugins","disabled","subscribe","item","isPluginEnable","monitor","notify","bind","watch","_item$transform","_item$consumer","res","transform","consumer","BaseOptions","enableTraceId","vue","filterXhrUrlRegExp","optionArr","traceIdFieldName","throttleDelayTime","includeHttpUrlTraceIdRegExp","beforeAppAjaxSend","httpUrl","d","traceId","getTime","c","Math","random","floor","asyncGeneratorStep","gen","reject","_next","_throw","arg","info","module","exports","__esModule","require$$0","_regeneratorRuntime","hasOwnProperty","asyncIterator","toStringTag","define","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","h","y","GeneratorFunction","GeneratorFunctionPrototype","p","getPrototypeOf","v","values","g","defineIteratorMethods","_invoke","AsyncIterator","invoke","__await","callInvokeWithMethodAndArg","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","resultName","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","mark","setPrototypeOf","__proto__","awrap","async","reverse","pop","prev","charAt","stop","rval","handle","complete","finish","catch","delegateYield","runtime","regenerator","regeneratorRuntime","accidentalStrictMode","globalThis","Function","BaseTransport","queue","_send","trackerId","getTrackerId","sdkVersion","sdkName","backTrackerId","targetUrl","dsn","origin","indexOf","beforeDataReport","functionType","configReportUrl","_callee","breadcrumb","errorId","transportData","_args","_context","isTrack","_objectSpread","getTransportData","wat","trim","sendToServer","self","_x"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,25,26,27,28]}