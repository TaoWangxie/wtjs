{"version":3,"file":"browser.cjs.js","sources":["../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/typeof.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/createClass.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/inherits.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../../shared/src/config.ts","../../shared/src/constant.ts","../../utils/src/is.ts","../../utils/src/global.ts","../../utils/src/logger.ts","../../utils/src/helpers.ts","../../utils/src/browser.ts","../../utils/src/queue.ts","../../utils/src/Severity.ts","../../utils/src/errorId.ts","../../core/src/breadcrumb.ts","../../core/src/subscribe.ts","../../utils/src/exception.ts","../../core/src/baseClient.ts","../../core/src/baseOptions.ts","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/typeof.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/regeneratorRuntime.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/regenerator/index.js","../../core/src/baseTransport.ts","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/get.js","../../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/superPropBase.js","../src/browserOptions.ts","../src/browserTransport.ts","../src/browserClient.ts","../src/utils.ts","../src/plugins/xhr.ts","../../utils/src/httpStatus.ts","../src/plugins/fetch.ts","../src/plugins/dom.ts","../src/plugins/error.ts","../src/plugins/hashRoute.ts","../src/plugins/historyRoute.ts","../src/plugins/console.ts","../src/plugins/unhandlerejecttion.ts","../src/index.ts"],"sourcesContent":["export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : String(i);\n}","import _typeof from \"./typeof.js\";\nexport default function toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import { version } from '../package.json'\n\nexport const SDK_NAME = 'mitojs'\nexport const SDK_VERSION = version\n","import { BrowserBreadcrumbTypes, BrowserEventTypes } from './browser'\nimport { WxBreadcrumbTypes, WxEventTypes } from './wx'\n\n/**\n * 上报错误类型\n */\nexport const enum ErrorTypes {\n  UNKNOWN = 'UNKNOWN',\n  UNKNOWN_FUNCTION = 'UNKNOWN_FUNCTION',\n  JAVASCRIPT = 'JAVASCRIPT',\n  LOG = 'LOG',\n  HTTP = 'HTTP',\n  VUE = 'VUE',\n  REACT = 'REACT',\n  RESOURCE = 'RESOURCE',\n  PROMISE = 'PROMISE',\n  ROUTE = 'ROUTE'\n}\n\n/**\n * 用户行为栈事件类型\n */\nexport type BreadcrumbTypes = BrowserBreadcrumbTypes | WxBreadcrumbTypes | BaseBreadcrumbTypes\n\nexport const enum BaseBreadcrumbTypes {\n  VUE = 'Vue',\n  REACT = 'React'\n}\n\n/**\n * 用户行为类型\n */\nexport const enum BREADCRUMBCATEGORYS {\n  HTTP = 'http',\n  USER = 'user',\n  DEBUG = 'debug',\n  EXCEPTION = 'exception',\n  LIFECYCLE = 'lifecycle'\n}\n\n/**\n * 所有重写事件类型整合\n */\nexport type EventTypes = BrowserEventTypes | WxEventTypes | BaseEventTypes\n\nexport const MitoLog = 'Mito.log'\nexport const MitoLogEmptyMsg = 'empty.msg'\nexport const MitoLogEmptyTag = 'empty.tag'\n\nexport const enum BaseEventTypes {\n  VUE = 'vue'\n}\n\nexport const enum HttpTypes {\n  XHR = 'xhr',\n  FETCH = 'fetch'\n}\n\nexport const enum MethodTypes {\n  Get = 'GET',\n  Post = 'POST',\n  Put = 'PUT',\n  Delete = 'DELETE'\n}\n\nexport const enum HTTP_CODE {\n  BAD_REQUEST = 400,\n  UNAUTHORIZED = 401,\n  INTERNAL_EXCEPTION = 500\n}\n\nexport const enum ToStringTypes {\n  String = 'String',\n  Number = 'Number',\n  Boolean = 'Boolean',\n  RegExp = 'RegExp',\n  Null = 'Null',\n  Undefined = 'Undefined',\n  Symbol = 'Symbol',\n  Object = 'Object',\n  Array = 'Array',\n  process = 'process',\n  Window = 'Window',\n  Function = 'Function'\n}\n\nexport const ERROR_TYPE_RE = /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/\nconst globalVar = {\n  isLogAddBreadcrumb: true,\n  crossOriginThreshold: 1000\n}\n\nexport const Silent = 'silent'\nexport { globalVar }\n","import { ToStringTypes } from '@wtjs/shared'\n\nexport const nativeToString = Object.prototype.toString\nexport function isType(type: string) {\n  return function (value: any): boolean {\n    return nativeToString.call(value) === `[object ${type}]`\n  }\n}\n\n/**\n * 检测变量类型\n * @param type\n */\nexport const variableTypeDetection = {\n  isNumber: isType(ToStringTypes.Number),\n  isString: isType(ToStringTypes.String),\n  isBoolean: isType(ToStringTypes.Boolean),\n  isNull: isType(ToStringTypes.Null),\n  isUndefined: isType(ToStringTypes.Undefined),\n  isSymbol: isType(ToStringTypes.Symbol),\n  isFunction: isType(ToStringTypes.Function),\n  isObject: isType(ToStringTypes.Object),\n  isArray: isType(ToStringTypes.Array),\n  isProcess: isType(ToStringTypes.process),\n  isWindow: isType(ToStringTypes.Window)\n}\n\n/**\n * Checks whether given value's type is one of a few Error or Error-like\n * {../link isError}.\n *\n * ../param wat A value to be checked.\n * ../returns A boolean representing the result.\n */\nexport function isError(wat: any): boolean {\n  switch (nativeToString.call(wat)) {\n    case '[object Error]':\n      return true\n    case '[object Exception]':\n      return true\n    case '[object DOMException]':\n      return true\n    default:\n      return isInstanceOf(wat, Error)\n  }\n}\n\n/**\n * 检查是否是空对象\n *\n * @export\n * @param {Object} obj 待检测的对象\n * @return {*}  {boolean}\n */\nexport function isEmptyObject(obj: Object): boolean {\n  return variableTypeDetection.isObject(obj) && Object.keys(obj).length === 0\n}\n\n/**\n * 检测是否是空字符、undefined、null\n *\n * @export\n * @param {*} wat\n * @return {*}  {boolean}\n */\nexport function isEmpty(wat: any): boolean {\n  return (variableTypeDetection.isString(wat) && wat.trim() === '') || wat === undefined || wat === null\n}\n\n/**\n * Checks whether given value's type is an instance of provided constructor.\n * {../link isInstanceOf}.\n *\n * ../param wat A value to be checked.\n * ../param base A constructor to be used in a check.\n * ../returns A boolean representing the result.\n */\nexport function isInstanceOf(wat: any, base: any): boolean {\n  try {\n    // tslint:disable-next-line:no-unsafe-any\n    return wat instanceof base\n  } catch (_e) {\n    return false\n  }\n}\n\nexport function isExistProperty(obj: Object, key: string | number | symbol): boolean {\n  return Object.prototype.hasOwnProperty.call(obj, key)\n}\n","import { EventTypes } from '@wtjs/shared'\nimport { Logger } from './logger'\nimport { DeviceInfo } from '@wtjs/types'\nimport { variableTypeDetection } from './is'\n\n/**\n *MITO的全局变量\n *\n * @export\n * @interface MitoSupport\n */\nexport interface MitoSupport {\n  logger: Logger\n  replaceFlag: { [key in EventTypes]?: boolean }\n  record?: any[]\n  deviceInfo?: DeviceInfo\n}\n\ninterface MITOGlobal {\n  console?: Console\n  __MITO__?: MitoSupport\n}\n\nexport const isNodeEnv = variableTypeDetection.isProcess(typeof process !== 'undefined' ? process : 0)\n\nexport const isWxMiniEnv =\n//@ts-ignore\n  variableTypeDetection.isObject(typeof wx !== 'undefined' ? wx : 0) &&\n  //@ts-ignore\n  variableTypeDetection.isFunction(typeof App !== 'undefined' ? App : 0)\n\nexport const isBrowserEnv = variableTypeDetection.isWindow(typeof window !== 'undefined' ? window : 0)\n/**\n * 获取全局变量\n *\n * ../returns Global scope object\n */\nexport function getGlobal<T>() {\n  if (isBrowserEnv) return window as unknown as MITOGlobal & T\n  //@ts-ignore\n  if (isWxMiniEnv) return wx as unknown as MITOGlobal & T\n  // it's true when run e2e\n  if (isNodeEnv) return process as unknown as MITOGlobal & T\n}\n// whether it is right use &\n//@ts-ignore\nconst _global = getGlobal<Window & WechatMiniprogram.Wx>()\nconst _support = getGlobalMitoSupport()\n/**\n * 获取全局变量__MITO__的引用地址\n *\n * @return {*}  {MitoSupport}\n */\nfunction getGlobalMitoSupport(): MitoSupport {\n  _global.__MITO__ = _global.__MITO__ || ({} as MitoSupport)\n  return _global.__MITO__\n}\n\nexport { _global, _support }\n\n// _support.replaceFlag = _support.replaceFlag || {}\n// const replaceFlag = _support.replaceFlag\n// export function setFlag(replaceType: EventTypes, isSet: boolean): void {\n//   if (replaceFlag[replaceType]) return\n//   replaceFlag[replaceType] = isSet\n// }\n\n// export function getFlag(replaceType: EventTypes): boolean {\n//   return replaceFlag[replaceType] ? true : false\n// }\n\nexport function supportsHistory(): boolean {\n  // borrowed from: https://github.com/angular/angular.js/pull/13945/files\n  const chrome = (_global as any).chrome\n  const isChromePackagedApp = chrome && chrome.app && chrome.app.runtime\n  const hasHistoryApi = 'history' in _global && !!_global.history.pushState && !!_global.history.replaceState\n  return !isChromePackagedApp && hasHistoryApi\n}\n","import { _global, _support } from './global'\nconst PREFIX = 'MITO Logger'\n\nexport class Logger {\n  private enabled = false\n  private _console: Console = {} as Console\n  constructor() {\n    _global.console = console || _global.console\n    if (console || _global.console) {\n      const logType = ['log', 'debug', 'info', 'warn', 'error', 'assert']\n      logType.forEach((level) => {\n        if (!(level in _global.console)) return\n        this._console[level] = _global.console[level]\n      })\n    }\n  }\n  disable(): void {\n    this.enabled = false\n  }\n\n  bindOptions(debug: boolean): void {\n    this.enabled = debug ? true : false\n  }\n\n  enable(): void {\n    this.enabled = true\n  }\n\n  getEnableStatus() {\n    return this.enabled\n  }\n\n  log(...args: any[]): void {\n    if (!this.enabled) {\n      return\n    }\n    this._console.log(`${PREFIX}[Log]:`, ...args)\n  }\n  warn(...args: any[]): void {\n    if (!this.enabled) {\n      return\n    }\n    this._console.warn(`${PREFIX}[Warn]:`, ...args)\n  }\n\n  /**\n   * error不需要开启enable也要打印出来，提示用户错误信息\n   *\n   * @param {...any[]} args\n   * @memberof Logger\n   */\n  error(...args: any[]): void {\n    this._console.error(`${PREFIX}[Error]:`, ...args)\n  }\n}\n\nconst logger = _support.logger || (_support.logger = new Logger())\nexport { logger }\n","import { IAnyObject } from '@wtjs/types'\nimport { globalVar, ToStringTypes } from '@wtjs/shared'\nimport { logger } from './logger'\nimport { nativeToString, variableTypeDetection } from './is'\nimport { isWxMiniEnv, isBrowserEnv } from './global'\n\nexport function getLocationHref(): string {\n  if (typeof document === 'undefined' || document.location == null) return ''\n  return document.location.href\n}\n\nexport function getUrlWithEnv(): string {\n  if (isWxMiniEnv) return getCurrentRoute()\n  if (isBrowserEnv) return getLocationHref()\n  return ''\n}\n\n// 用到所有事件的名称\ntype TotalEventName = keyof GlobalEventHandlersEventMap | keyof XMLHttpRequestEventTargetEventMap | keyof WindowEventMap\n\n/**\n * 添加事件监听器\n *\n * @export\n * @param {{ addEventListener: Function }} target 目标对象\n * @param {TotalEventName} eventName 目标对象上的事件名\n * @param {Function} handler 回调函数\n * @param {(boolean | unknown)} [opitons=false] useCapture默认为false\n */\nexport function on(\n  target: { addEventListener: Function },\n  eventName: TotalEventName,\n  handler: Function,\n  opitons: boolean | unknown = false\n): void {\n  target.addEventListener(eventName, handler, opitons)\n}\n\n/**\n * 重写对象上面的某个属性\n *\n * @export\n * @param {IAnyObject} source 需要被重写的对象\n * @param {string} name 需要被重写对象的key\n * @param {(...args: any[]) => any} replacement 以原有的函数作为参数，执行并重写原有函数\n * @param {boolean} [isForced=false] 是否强制重写（可能原先没有该属性）\n */\nexport function replaceOld(source: IAnyObject, name: string, replacement: (...args: any[]) => any, isForced = false): void {\n  if (source === undefined) return\n  if (name in source || isForced) {\n    const original = source[name]\n    const wrapped = replacement(original)\n    if (typeof wrapped === 'function') {\n      source[name] = wrapped\n    }\n  }\n}\n\n/**\n * 用&分割对象，返回a=1&b=2\n * ../param obj 需要拼接的对象\n */\n// export function splitObjToQuery(obj: Record<string, unknown>): string {\n//   return Object.entries(obj).reduce((result, [key, value], index) => {\n//     if (index !== 0) {\n//       result += '&'\n//     }\n//     const valueStr = variableTypeDetection.isObject(value) || variableTypeDetection.isArray(value) ? JSON.stringify(value) : value\n//     result += `${key}=${valueStr}`\n//     return result\n//   }, '')\n// }\n\nexport const defaultFunctionName = '<anonymous>'\n/**\n * 需要获取函数名，匿名则返回<anonymous>\n * ../param {unknown} fn 需要获取函数名的函数本体\n * ../returns 返回传入的函数的函数名\n */\nexport function getFunctionName(fn: unknown): string {\n  if (!fn || typeof fn !== 'function') {\n    return defaultFunctionName\n  }\n  return fn.name || defaultFunctionName\n}\n\n// 函数防抖\n/**\n *\n * ../param fn 需要防抖的函数\n * ../param delay 防抖的时间间隔\n * ../param isImmediate 是否需要立即执行，默认为false，第一次是不执行的\n * ../returns 返回一个包含防抖功能的函数\n */\n// export const debounce = (fn: voidFun, delay: number, isImmediate = false): voidFun => {\n//   let timer = null\n//   return function (...args: any) {\n//     if (isImmediate) {\n//       fn.apply(this, args)\n//       isImmediate = false\n//       return\n//     }\n//     clearTimeout(timer)\n//     timer = setTimeout(() => {\n//       fn.apply(this, args)\n//     }, delay)\n//   }\n// }\n\n/**\n * 函数节流\n *\n * @export\n * @param {Function} fn 需要节流的函数\n * @param {number} delay 节流的时间间隔\n * @return {*}  {Function} 返回一个包含节流功能的函数\n */\nexport function throttle(fn: Function, delay: number): Function {\n  let canRun = true\n  return function (...args: any) {\n    if (!canRun) return\n    fn.apply(this, args)\n    canRun = false\n    setTimeout(() => {\n      canRun = true\n    }, delay)\n  }\n}\n\n/**\n * 原子字符中是否包含目标字符\n *\n * @export\n * @param {string} origin 原字符\n * @param {string} target 目标字符\n * @return {*}  {boolean}\n */\nexport function isInclude(origin: string, target: string): boolean {\n  return !!~origin.indexOf(target)\n}\n\n/**\n * 获取当前的时间戳\n *\n * @export\n * @return {*}  {number}\n */\nexport function getTimestamp(): number {\n  return Date.now()\n}\n\nexport function toStringAny(target: any, type: ToStringTypes): boolean {\n  return nativeToString.call(target) === `[object ${type}]`\n}\n\nexport function toStringValidateOption(target: any, targetName: string, expectType: ToStringTypes): boolean {\n  if (toStringAny(target, expectType)) return true\n  typeof target !== 'undefined' && logger.error(`${targetName}期望传入:${expectType}类型，当前是:${nativeToString.call(target)}类型`)\n  return false\n}\n\n/**\n * 如果用户输入console，并且logger是打开的会造成无限递归，执行callback前，会把监听console的行为关掉\n *\n * @export\n * @param {Function} callback\n */\nexport function silentConsoleScope(callback: Function) {\n  globalVar.isLogAddBreadcrumb = false\n  callback()\n  globalVar.isLogAddBreadcrumb = true\n}\n\nexport function generateUUID(): string {\n  let d = new Date().getTime()\n  const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = (d + Math.random() * 16) % 16 | 0\n    d = Math.floor(d / 16)\n    return (c == 'x' ? r : (r & 0x3) | 0x8).toString(16)\n  })\n  return uuid\n}\n\nexport function unknownToString(target: unknown): string {\n  if (variableTypeDetection.isString(target)) {\n    return target as string\n  }\n  if (variableTypeDetection.isUndefined(target)) {\n    return 'undefined'\n  }\n  return JSON.stringify(target)\n}\n\nexport function getBigVersion(version: string) {\n  return Number(version.split('.')[0])\n}\n\n/**\n * 给url添加query\n * @param url\n * @param query\n */\nexport function setUrlQuery(url: string, query: object) {\n  const queryArr = []\n  Object.keys(query).forEach((k) => {\n    queryArr.push(`${k}=${query[k]}`)\n  })\n  if (url.indexOf('?') !== -1) {\n    url = `${url}&${queryArr.join('&')}`\n  } else {\n    url = `${url}?${queryArr.join('&')}`\n  }\n  return url\n}\n\nexport function interceptStr(str: string, interceptLength: number): string {\n  if (variableTypeDetection.isString(str)) {\n    return str.slice(0, interceptLength) + (str.length > interceptLength ? `;slice the first ${interceptLength} characters` : '')\n  }\n  return ''\n}\n\n/**\n * 获取wx当前route的方法\n * 必须是在进入Page或Component构造函数内部才能够获取到currentPages\n * 否则都是在注册Page和Component时执行的代码，此时url默认返回'App'\n */\nexport function getCurrentRoute() {\n  //@ts-ignore\n  if (!variableTypeDetection.isFunction(getCurrentPages)) {\n    return ''\n  }\n  //@ts-ignore\n  const pages = getCurrentPages() // 在App里调用该方法，页面还没有生成，长度为0\n  if (!pages.length) {\n    return 'App'\n  }\n  const currentPage = pages.pop()\n  return setUrlQuery(currentPage.route, currentPage.options)\n}\n\n/**\n *将传入的字符串的首字母改为大写，其他不变\n *\n * @export\n * @param {string} str 原字符\n * @return {*}  {string}\n * @example xhr => Xhr\n */\nexport function firstStrtoUppercase(str: string): string {\n  return str.replace(/\\b(\\w)(\\w*)/g, function ($0: string, $1: string, $2: string) {\n    return `${$1.toUpperCase()}${$2}`\n  })\n}\n\n/**\n *将传入的字符串的首字母改为小写，其他不变\n *\n * @export\n * @param {string} str 原字符\n * @return {*}  {string}\n * @example Xhr => xhr\n */\nexport function firstStrtoLowerCase(str: string): string {\n  return str.replace(/\\b(\\w)(\\w*)/g, function ($0: string, $1: string, $2: string) {\n    return `${$1.toLowerCase()}${$2}`\n  })\n}\n\n/**\n * 安全的转换对象，包括循环引用，如果是循环引用就返回Circular\n *\n * @export\n * @param {object} obj 需要转换的对象\n * @return {*}  {string}\n */\nexport function safeStringify(obj: object): string {\n  const set = new Set()\n  const str = JSON.stringify(obj, function (_key, value) {\n    if (set.has(value)) {\n      return 'Circular'\n    }\n    typeof value === 'object' && set.add(value)\n    return value\n  })\n  set.clear()\n  return str\n}\n\n/**\n * 解决Vue3抛出的proxy对象循环引用的问题\n *\n * @export\n * @template T\n * @param {IAnyObject} obj\n * @return {*}  {T}\n */\nexport function getObjectWithForIn<T = IAnyObject>(obj: IAnyObject): T {\n  if (!variableTypeDetection.isObject(obj)) return obj as unknown as T\n  const result = {}\n  for (const key in obj) {\n    result[key] = obj[key]\n  }\n  return result as T\n}\n\nexport function validateOptionsAndSet(this: any, targetArr: [any, string, ToStringTypes][]) {\n  targetArr.forEach(\n    ([target, targetName, expectType]) => toStringValidateOption(target, targetName, expectType) && (this[targetName] = target)\n  )\n}\n\nexport function sleepRun(fn: () => void, delay = 200) {\n  setTimeout(() => {\n    fn()\n  }, delay)\n}\n","import { BREADCRUMBCATEGORYS, BrowserBreadcrumbTypes, ErrorTypes } from '@wtjs/shared'\nimport { getTimestamp, getUrlWithEnv } from './helpers'\nimport { Severity } from './Severity'\n\n/**\n * 返回包含id、class、innerTextde字符串的标签\n * @param target html节点\n */\nexport function htmlElementAsString(target: HTMLElement): string {\n  const tagName = target.tagName.toLowerCase()\n  if (tagName === 'body') {\n    return null\n  }\n  let classNames = target.classList.value\n  classNames = classNames !== '' ? ` class=\"${classNames}\"` : ''\n  const id = target.id ? ` id=\"${target.id}\"` : ''\n  const innerText = target.innerText\n  return `<${tagName}${id}${classNames !== '' ? classNames : ''}>${innerText}</${tagName}>`\n}\n\n/**\n * 将地址字符串转换成对象\n * @returns 返回一个对象\n */\nexport function parseUrlToObj(url: string): {\n  host?: string\n  path?: string\n  protocol?: string\n  relative?: string\n} {\n  if (!url) {\n    return {}\n  }\n\n  // eslint-disable-next-line no-useless-escape\n  const match = url.match(/^(([^:\\/?#]+):)?(\\/\\/([^\\/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$/)\n\n  if (!match) {\n    return {}\n  }\n\n  const query = match[6] || ''\n  const fragment = match[8] || ''\n  return {\n    host: match[4],\n    path: match[5],\n    protocol: match[2],\n    relative: match[5] + query + fragment // everything minus origin\n  }\n}\n\n/**\n * 根据browser行为类型返回种类\n *\n * @export\n * @param {BrowserBreadcrumbTypes} type\n * @return {*}  {BREADCRUMBCATEGORYS}\n */\nexport function getBreadcrumbCategoryInBrowser(type: BrowserBreadcrumbTypes): BREADCRUMBCATEGORYS {\n  switch (type) {\n    case BrowserBreadcrumbTypes.XHR:\n    case BrowserBreadcrumbTypes.FETCH:\n      return BREADCRUMBCATEGORYS.HTTP\n    case BrowserBreadcrumbTypes.CLICK:\n    case BrowserBreadcrumbTypes.ROUTE:\n      return BREADCRUMBCATEGORYS.USER\n    case BrowserBreadcrumbTypes.CUSTOMER:\n    case BrowserBreadcrumbTypes.CONSOLE:\n      return BREADCRUMBCATEGORYS.DEBUG\n    case BrowserBreadcrumbTypes.UNHANDLEDREJECTION:\n    case BrowserBreadcrumbTypes.CODE_ERROR:\n    case BrowserBreadcrumbTypes.RESOURCE:\n    default:\n      return BREADCRUMBCATEGORYS.EXCEPTION\n  }\n}\n\n/**\n * 解析error的stack，并返回args、column、line、func、url:\n * wx AppOnError use too\n * @param ex\n * @param level\n */\nexport function extractErrorStack(ex: any, level: Severity) {\n  const normal = {\n    time: getTimestamp(),\n    url: getUrlWithEnv(),\n    name: ex.name,\n    level,\n    message: ex.message\n  }\n  if (typeof ex.stack === 'undefined' || !ex.stack) {\n    return normal\n  }\n\n  const chrome =\n      /^\\s*at (.*?) ?\\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\\/).*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i,\n    gecko =\n      /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\\[native).*?|[^@]*bundle)(?::(\\d+))?(?::(\\d+))?\\s*$/i,\n    winjs = /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i,\n    // Used to additionally parse URL/line/column from eval frames\n    geckoEval = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i,\n    chromeEval = /\\((\\S*)(?::(\\d+))(?::(\\d+))\\)/,\n    lines = ex.stack.split('\\n'),\n    stack = []\n\n  let submatch, parts, element\n  // reference = /^(.*) is undefined$/.exec(ex.message)\n\n  for (let i = 0, j = lines.length; i < j; ++i) {\n    if ((parts = chrome.exec(lines[i]))) {\n      const isNative = parts[2] && parts[2].indexOf('native') === 0 // start of line\n      const isEval = parts[2] && parts[2].indexOf('eval') === 0 // start of line\n      if (isEval && (submatch = chromeEval.exec(parts[2]))) {\n        // throw out eval line/column and use top-most line/column number\n        parts[2] = submatch[1] // url\n        parts[3] = submatch[2] // line\n        parts[4] = submatch[3] // column\n      }\n      element = {\n        url: !isNative ? parts[2] : null,\n        func: parts[1] || ErrorTypes.UNKNOWN_FUNCTION,\n        args: isNative ? [parts[2]] : [],\n        line: parts[3] ? +parts[3] : null,\n        column: parts[4] ? +parts[4] : null\n      }\n    } else if ((parts = winjs.exec(lines[i]))) {\n      element = {\n        url: parts[2],\n        func: parts[1] || ErrorTypes.UNKNOWN_FUNCTION,\n        args: [],\n        line: +parts[3],\n        column: parts[4] ? +parts[4] : null\n      }\n    } else if ((parts = gecko.exec(lines[i]))) {\n      const isEval = parts[3] && parts[3].indexOf(' > eval') > -1\n      if (isEval && (submatch = geckoEval.exec(parts[3]))) {\n        // throw out eval line/coluqqqqqqqqqqqqqqqqqqqqqqqqqqqqmn and use top-most line number\n        parts[3] = submatch[1]\n        parts[4] = submatch[2]\n        parts[5] = null // no column when eval\n      } else if (i === 0 && !parts[5] && typeof ex.columnNumber !== 'undefined') {\n        // FireFox uses this awesome columnNumber property for its top frame\n        // Also note, Firefox's column number is 0-based and everything else expects 1-based,\n        // so adding 1\n        // NOTE: this hack doesn't work if top-most frame is eval\n        stack[0].column = ex.columnNumber + 1\n      }\n      element = {\n        url: parts[3],\n        func: parts[1] || ErrorTypes.UNKNOWN_FUNCTION,\n        args: parts[2] ? parts[2].split(',') : [],\n        line: parts[4] ? +parts[4] : null,\n        column: parts[5] ? +parts[5] : null\n      }\n    } else {\n      continue\n    }\n\n    if (!element.func && element.line) {\n      element.func = ErrorTypes.UNKNOWN_FUNCTION\n    }\n\n    stack.push(element)\n  }\n\n  if (!stack.length) {\n    return null\n  }\n  return {\n    ...normal,\n    stack: stack\n  }\n}\n","import { _global } from './global'\nexport class Queue {\n  private readonly micro: Promise<void>\n  private stack: any[] = []\n  private isFlushing = false\n  constructor() {\n    if (!('Promise' in _global)) return\n    this.micro = Promise.resolve()\n  }\n  addTask(fn: () => void): void {\n    if (typeof fn !== 'function') return\n    if (!('Promise' in _global)) {\n      fn()\n      return\n    }\n    this.stack.push(fn)\n    if (!this.isFlushing) {\n      this.isFlushing = true\n      this.micro.then(() => this.flushStack())\n    }\n  }\n  clear() {\n    this.stack = []\n  }\n  getStack() {\n    return this.stack\n  }\n  flushStack(): void {\n    const temp = this.stack.slice(0)\n    this.stack.length = 0\n    this.isFlushing = false\n    for (const fn of temp) {\n      fn()\n    }\n  }\n  // rollup queue\n}\n","/** 等级程度枚举 */\nexport enum Severity {\n  Else = 'else',\n  Error = 'error',\n  Warning = 'warning',\n  Info = 'info',\n  Debug = 'debug',\n  /** 上报的错误等级 */\n  Low = 'low',\n  Normal = 'normal',\n  High = 'high',\n  Critical = 'critical'\n}\n\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Severity {\n  /**\n   * Converts a string-based level into a {@link Severity}.\n   *\n   * @param level string representation of Severity\n   * @returns Severity\n   */\n  export function fromString(level: string): Severity {\n    switch (level) {\n      case 'debug':\n        return Severity.Debug\n      case 'info':\n      case 'log':\n      case 'assert':\n        return Severity.Info\n      case 'warn':\n      case 'warning':\n        return Severity.Warning\n      case Severity.Low:\n      case Severity.Normal:\n      case Severity.High:\n      case Severity.Critical:\n      case 'error':\n        return Severity.Error\n      default:\n        return Severity.Else\n    }\n  }\n}\n","import { ReportDataType } from '@wtjs/types'\nimport { BrowserEventTypes, ErrorTypes } from '@wtjs/shared'\nimport { variableTypeDetection } from './is'\nconst allErrorNumber: unknown = {}\n/**\n * generate error unique Id\n *\n * @export\n * @param {ReportDataType} data 上报的数据结构\n * @param {string} apikey 项目的唯一key\n * @param {number} maxDuplicateCount init配置项，最多可重复上报同一个错误的次数\n * @return {*}  {(number | null)}\n */\nexport function createErrorId(data: ReportDataType, apikey: string, maxDuplicateCount: number): number | null {\n  let id: any\n  switch (data.type) {\n    case ErrorTypes.HTTP:\n      id = data.type + data.request.method + data.response.status + getRealPath(data.request.url) + apikey\n      break\n    case ErrorTypes.JAVASCRIPT:\n    case ErrorTypes.VUE:\n    case ErrorTypes.REACT:\n      id = data.type + data.name + data.message + apikey\n      break\n    case ErrorTypes.LOG:\n      id = data.customTag + data.type + data.name + apikey\n      break\n    case ErrorTypes.PROMISE:\n      id = generatePromiseErrorId(data, apikey)\n      break\n    default:\n      id = data.type + data.message + apikey\n      break\n  }\n  id = hashCode(id)\n  if (allErrorNumber[id] >= maxDuplicateCount) {\n    return null\n  }\n  if (typeof allErrorNumber[id] === 'number') {\n    allErrorNumber[id]++\n  } else {\n    allErrorNumber[id] = 1\n  }\n\n  return id\n}\n/**\n * 如果是UNHANDLEDREJECTION，则按照项目apikey来生成\n * 如果是其他的，按照当前页面来生成\n * @param data\n * @param originUrl\n */\nfunction generatePromiseErrorId(data: ReportDataType, apikey: string) {\n  const locationUrl = getRealPath(data.url)\n  if (data.name === BrowserEventTypes.UNHANDLEDREJECTION) {\n    return data.type + stringToObjAndOrder(data.message) + apikey\n  }\n  return data.type + data.name + stringToObjAndOrder(data.message) + locationUrl\n}\n\nexport function sortObjByKey<T = object>(obj: T): T {\n  return Object.keys(obj)\n    .sort()\n    .reduce((total, key) => {\n      if (variableTypeDetection.isObject(obj[key])) {\n        total[key] = sortObjByKey(obj[key])\n      } else {\n        total[key] = obj[key]\n      }\n      return total\n    }, {}) as T\n}\n\n/**\n * sort object keys\n * ../param reason promise.reject\n */\nexport function stringToObjAndOrder(reason: string) {\n  try {\n    if (/\\{.*\\}/.test(reason)) {\n      let obj = JSON.parse(reason)\n      obj = sortObjByKey(obj)\n      return JSON.stringify(obj)\n    }\n    return reason\n  } catch (error) {\n    return reason\n  }\n}\n\n/**\n *\n * 获取去掉query后的地主\n * @export\n * @param {string} url 地址\n * @return {*}  {string}\n * @example http://.../project?id=1#a => http://.../project  http://.../id/123=> http://.../id/{param}\n */\nexport function getRealPath(url: string): string {\n  return url\n    .replace(/[?#].*$/, '')\n    .replace(/\\/(\\d+)\\//g, '/{param}/$1')\n    .replace(/\\/\\d+([/]*$)/g, '/{param}$1')\n}\n\n/**\n *\n * @param url\n */\nexport function getFlutterRealOrigin(url: string): string {\n  // for apple\n  return removeHashPath(getFlutterRealPath(url))\n}\n\n/**\n * 获取flutter的原始地址：每个用户的文件夹hash不同\n * @param url\n */\nexport function getFlutterRealPath(url: string): string {\n  // for apple\n  return url.replace(/(\\S+)(\\/Documents\\/)(\\S*)/, `$3`)\n}\n\nexport function removeHashPath(url: string): string {\n  return url.replace(/(\\S+)(\\/#\\/)(\\S*)/, `$1`)\n}\n\n/**\n * 根据字符串生成hashcode\n *\n * @export\n * @param {string} str\n * @return {*}  {number} 可为正数和负数\n */\nexport function hashCode(str: string): number {\n  let hash = 0\n  if (str.length == 0) return hash\n  for (let i = 0; i < str.length; i++) {\n    const char = str.charCodeAt(i)\n    hash = (hash << 5) - hash + char\n    hash = hash & hash\n  }\n  return hash\n}\n","import { ToStringTypes } from '@wtjs/shared'\nimport { logger, getTimestamp, silentConsoleScope, toStringValidateOption } from '@wtjs/utils'\nimport { BaseOptionsFieldsIntegrationType, BreadcrumbPushData } from '@wtjs/types'\n\n/**\n * 用户行为栈存储，实体类\n *\n * @export\n * @class Breadcrumb\n * @template O\n */\nexport class Breadcrumb<O extends BaseOptionsFieldsIntegrationType = BaseOptionsFieldsIntegrationType> {\n  private maxBreadcrumbs = 10\n  private beforePushBreadcrumb: unknown = null\n  private stack: BreadcrumbPushData[] = []\n  constructor(options: Partial<O> = {}) {\n    this.bindOptions(options)\n  }\n  /**\n   * 添加用户行为栈\n   *\n   * @param {BreadcrumbPushData} data\n   * @memberof Breadcrumb\n   */\n  push(data: BreadcrumbPushData): BreadcrumbPushData[] {\n    if (typeof this.beforePushBreadcrumb === 'function') {\n      let result: BreadcrumbPushData = null\n      const beforePushBreadcrumb = this.beforePushBreadcrumb\n      silentConsoleScope(() => {\n        result = beforePushBreadcrumb.call(this, this, data)\n      })\n      if (!result) return this.stack\n      return this.immediatePush(result)\n    }\n    return this.immediatePush(data)\n  }\n\n  private immediatePush(data: BreadcrumbPushData): BreadcrumbPushData[] {\n    data.time || (data.time = getTimestamp())\n    if (this.stack.length >= this.maxBreadcrumbs) {\n      this.shift()\n    }\n    this.stack.push(data)\n    // make sure xhr fetch is behind button click\n    this.stack.sort((a, b) => a.time - b.time)\n    logger.log(this.stack)\n    return this.stack\n  }\n\n  private shift(): boolean {\n    return this.stack.shift() !== undefined\n  }\n\n  clear(): void {\n    this.stack = []\n  }\n\n  getStack(): BreadcrumbPushData[] {\n    return this.stack\n  }\n\n  bindOptions(options: Partial<O> = {}): void {\n    const { maxBreadcrumbs, beforePushBreadcrumb } = options\n    toStringValidateOption(maxBreadcrumbs, 'maxBreadcrumbs', ToStringTypes.Number) && (this.maxBreadcrumbs = maxBreadcrumbs)\n    toStringValidateOption(beforePushBreadcrumb, 'beforePushBreadcrumb', ToStringTypes.Function) &&\n      (this.beforePushBreadcrumb = beforePushBreadcrumb)\n  }\n}\n","import { getFunctionName, logger, nativeTryCatch } from '@wtjs/utils'\n\ntype MonitorCallback = (data: any) => void\n/**\n * 发布订阅类\n *\n * @export\n * @class Subscribe\n * @template T 事件枚举\n */\nexport class Subscribe<T> {\n  dep: Map<T, MonitorCallback[]> = new Map()\n  constructor() {}\n  watch(eventName: T, callBack: (data: any) => any) {\n    const fns = this.dep.get(eventName)\n    if (fns) {\n      this.dep.set(eventName, fns.concat(callBack))\n      return\n    }\n    this.dep.set(eventName, [callBack])\n  }\n  notify<D = any>(eventName: T, data: D) {\n    const fns = this.dep.get(eventName)\n    if (!eventName || !fns) return\n    fns.forEach((fn) => {\n      nativeTryCatch(\n        () => {\n          fn(data)\n        },\n        (e: Error) => {\n          logger.error(`Subscribe.notify：监听事件的回调函数发生错误\\neventName:${eventName}\\nName: ${getFunctionName(fn)}\\nError: ${e}`)\n        }\n      )\n    })\n  }\n}\n","/**\n * 原生try函数\n * ../param fn try中执行的函数体\n * ../param errorFn 报错时执行的函数体，将err传入\n */\nexport function nativeTryCatch(fn: () => void, errorFn?: (err: any) => void): void {\n  try {\n    fn()\n  } catch (err) {\n    console.error('err', err)\n    if (errorFn) {\n      errorFn(err)\n    }\n  }\n}\n","import { EventTypes, SDK_VERSION } from '@wtjs/shared'\nimport { BaseClientType, BaseOptionsFieldsIntegrationType, BasePluginType, LogTypes } from '@wtjs/types'\nimport { logger } from '@wtjs/utils'\nimport { BaseTransport, Breadcrumb } from '.'\nimport { Subscribe } from './subscribe'\n\n/**\n * 抽象客户端，已实现插件和钩子函数的定义\n * 如果目前的钩子函数满足不了业务，需要在use中额外添加钩子，并在各个端实现\n *\n * @export\n * @abstract\n * @class BaseClient\n * @implements {BaseClientType}\n * @template O\n * @template E\n */\nexport abstract class BaseClient<\n  O extends BaseOptionsFieldsIntegrationType = BaseOptionsFieldsIntegrationType,\n  E extends EventTypes = EventTypes\n> implements BaseClientType\n{\n  SDK_NAME: string\n  SDK_VERSION = SDK_VERSION\n  options: BaseOptionsFieldsIntegrationType\n  abstract breadcrumb: Breadcrumb\n  abstract transport: BaseTransport\n  constructor(options: O) {\n    this.options = options\n    logger.bindOptions(options.debug)\n  }\n\n  /**\n   * 引用插件\n   *\n   * @param {BasePluginType<E>[]} plugins\n   * @memberof BaseClient\n   */\n  use(plugins: BasePluginType<E>[]) {\n    if (this.options.disabled) return\n    // 新建发布订阅实例\n    const subscribe = new Subscribe<E>()\n    plugins.forEach((item) => {\n      if (!this.isPluginEnable(item.name)) return\n      // 调用插件中的monitor并将发布函数传入\n      item.monitor.call(this, subscribe.notify.bind(subscribe))\n      const wrapperTransform = (...args: any[]) => {\n        // 先执行transform\n        const res = item.transform?.apply(this, args)\n        // 拿到transform返回的数据并传入\n        item.consumer?.call(this, res)\n        // 如果需要新增hook，可在这里添加逻辑\n      }\n      // 订阅插件中的名字，并传入回调函数\n      subscribe.watch(item.name, wrapperTransform)\n    })\n  }\n  getOptions() {\n    return this.options\n  }\n\n  /**\n   * 判断当前插件是否启用，每个端的可选字段不同，需要子类实现\n   *\n   * @abstract\n   * @param {EventTypes} name\n   * @return {*}  {boolean}\n   * @memberof BaseClient\n   */\n  abstract isPluginEnable(name: EventTypes): boolean\n\n  /**\n   * 手动上报方法，每个端需要自己实现\n   *\n   * @abstract\n   * @param {LogTypes} data\n   * @memberof BaseClient\n   */\n  abstract log(data: LogTypes): void\n}\n","import { ToStringTypes } from '@wtjs/shared'\nimport { BaseOptionsFieldsIntegrationType, BaseOptionsType, VueInstance } from '@wtjs/types'\nimport { generateUUID, validateOptionsAndSet } from '@wtjs/utils'\n\n/**\n * 公用的基础配置项绑定\n *\n * @export\n * @class BaseOptions\n * @implements {BaseOptionsType<O>}\n * @template O\n */\nexport class BaseOptions<O extends BaseOptionsFieldsIntegrationType = BaseOptionsFieldsIntegrationType> implements BaseOptionsType<O> {\n  enableTraceId = false\n  filterXhrUrlRegExp: RegExp\n  includeHttpUrlTraceIdRegExp = /.*/\n  traceIdFieldName = 'Trace-Id'\n  throttleDelayTime = 0\n  beforeAppAjaxSend = null\n  vue: VueInstance = null\n  constructor() {}\n  bindOptions(options: O) {\n    const { enableTraceId, vue, filterXhrUrlRegExp, traceIdFieldName, throttleDelayTime, includeHttpUrlTraceIdRegExp, beforeAppAjaxSend } =\n      options\n    const optionArr = [\n      [enableTraceId, 'enableTraceId', ToStringTypes.Boolean],\n      [traceIdFieldName, 'traceIdFieldName', ToStringTypes.String],\n      [throttleDelayTime, 'throttleDelayTime', ToStringTypes.Number],\n      [filterXhrUrlRegExp, 'filterXhrUrlRegExp', ToStringTypes.RegExp],\n      [includeHttpUrlTraceIdRegExp, 'includeHttpUrlTraceIdRegExp', ToStringTypes.RegExp],\n      [beforeAppAjaxSend, 'beforeAppAjaxSend', ToStringTypes.Function]\n    ]\n    validateOptionsAndSet.call(this, optionArr)\n    // for vue\n    this.vue = vue\n  }\n  isFilterHttpUrl(url: string): boolean {\n    return this.filterXhrUrlRegExp && this.filterXhrUrlRegExp.test(url)\n  }\n  setTraceId(httpUrl: string, callback: (headerFieldName: string, traceId: string) => void) {\n    const { includeHttpUrlTraceIdRegExp, enableTraceId } = this\n    if (enableTraceId && includeHttpUrlTraceIdRegExp && includeHttpUrlTraceIdRegExp.test(httpUrl)) {\n      const traceId = generateUUID()\n      callback(this.traceIdFieldName, traceId)\n    }\n  }\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return e;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function define(t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function value(t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw new Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(_typeof(e) + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function complete(t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function finish(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    \"catch\": function _catch(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","import { logger, Queue, isInclude, createErrorId, isEmpty, validateOptionsAndSet } from '@wtjs/utils'\nimport { SDK_NAME, SDK_VERSION, ToStringTypes } from '@wtjs/shared'\nimport { AuthInfo, BaseOptionsFieldsIntegrationType, BreadcrumbPushData, ReportDataType, TransportDataType } from '@wtjs/types'\n\n/**\n * 传输数据抽象类\n *\n * @export\n * @abstract\n * @class BaseTransport\n * @template O\n */\nexport abstract class BaseTransport<O extends BaseOptionsFieldsIntegrationType = BaseOptionsFieldsIntegrationType> {\n  apikey = ''\n  dsn = ''\n  queue: Queue\n  beforeDataReport: Promise<TransportDataType | null | undefined | boolean> | TransportDataType | any | null | undefined | boolean = null\n  backTrackerId: unknown = null\n  configReportUrl: unknown = null\n  maxDuplicateCount = 3\n  constructor() {\n    this.queue = new Queue()\n  }\n\n  /**\n   * 获取当前SDK信息\n   *\n   * @return {*}  {AuthInfo}\n   * @memberof BaseTransport\n   */\n  getAuthInfo(): AuthInfo {\n    const trackerId = this.getTrackerId()\n    const result: AuthInfo = {\n      trackerId: String(trackerId),\n      sdkVersion: SDK_VERSION,\n      sdkName: SDK_NAME,\n      apikey: this.apikey\n    }\n    return result\n  }\n\n  /**\n   * 获取hooks中返回的trackId，没有就返回''\n   *\n   * @return {*}  {(string | number)}\n   * @memberof BaseTransport\n   */\n  getTrackerId(): string | number {\n    if (typeof this.backTrackerId === 'function') {\n      const trackerId = this.backTrackerId()\n      if (typeof trackerId === 'string' || typeof trackerId === 'number') {\n        return trackerId\n      } else {\n        logger.error(`trackerId:${trackerId} 期望 string 或 number 类型，但是传入 ${typeof trackerId}`)\n      }\n    }\n    return ''\n  }\n\n  /**\n   * 判断当前url是不是你配置的dsn\n   *\n   * @param {string} targetUrl\n   * @return {*}  {boolean}\n   * @memberof BaseTransport\n   */\n  isSelfDsn(targetUrl: string): boolean {\n    return this.dsn && isInclude(targetUrl, this.dsn)\n  }\n\n  /**\n   * 绑定配置项\n   *\n   * @param {Partial<O>} [options={}]\n   * @memberof BaseTransport\n   */\n  bindOptions(options: Partial<O> = {}): void {\n    const { dsn, beforeDataReport, apikey, maxDuplicateCount, backTrackerId, configReportUrl } = options\n    const functionType = ToStringTypes.Function\n    const optionArr = [\n      [apikey, 'apikey', ToStringTypes.String],\n      [dsn, 'dsn', ToStringTypes.String],\n      [maxDuplicateCount, 'maxDuplicateCount', ToStringTypes.Number],\n      [beforeDataReport, 'beforeDataReport', functionType],\n      [backTrackerId, 'backTrackerId', functionType],\n      [configReportUrl, 'configReportUrl', functionType]\n    ]\n    validateOptionsAndSet.call(this, optionArr)\n  }\n\n  /**\n   * 发送数据到服务端\n   *\n   * @param {*} data\n   * @param {BreadcrumbPushData[]} breadcrumb\n   * @return {*}\n   * @memberof BaseTransport\n   */\n  async send(data: any, breadcrumb: BreadcrumbPushData[] = []): Promise<void> {\n    // 如果是埋点则不需要生成errorId\n    if (!data.isTrack) {\n      const errorId = createErrorId(data, this.apikey, this.maxDuplicateCount)\n      if (!errorId) return\n      data.errorId = errorId\n    }\n    let transportData = {\n      ...this.getTransportData(data),\n      breadcrumb\n    }\n    if (typeof this.beforeDataReport === 'function') {\n      transportData = await this.beforeDataReport(transportData)\n      if (!transportData) return\n    }\n    let dsn = this.dsn\n    if (isEmpty(dsn)) {\n      logger.error('dsn is empty,pass in when initializing please')\n      return\n    }\n    if (typeof this.configReportUrl === 'function') {\n      dsn = this.configReportUrl(transportData, dsn)\n      if (!dsn) return\n    }\n    return this.sendToServer(transportData, dsn)\n  }\n\n  /**\n   * post方式，子类需要重写\n   *\n   * @abstract\n   * @param {(TransportDataType | any)} data\n   * @param {string} url\n   * @memberof BaseTransport\n   */\n  abstract post(data: TransportDataType | any, url: string): void\n  /**\n   * 最终上报到服务器的方法，需要子类重写\n   *\n   * @abstract\n   * @param {(TransportDataType | any)} data\n   * @param {string} url\n   * @memberof BaseTransport\n   */\n  abstract sendToServer(data: TransportDataType | any, url: string): void\n  /**\n   * 获取上报的格式\n   *\n   * @abstract\n   * @param {ReportDataType} data\n   * @return {TransportDataType}  {TransportDataType}\n   * @memberof BaseTransport\n   */\n  abstract getTransportData(data: ReportDataType): TransportDataType\n}\n","import superPropBase from \"./superPropBase.js\";\nexport default function _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    };\n  }\n  return _get.apply(this, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}","import { BaseOptions } from '@wtjs/core'\nimport { ToStringTypes } from '@wtjs/shared'\nimport { validateOptionsAndSet } from '@wtjs/utils'\nimport { BrowserOptionsFieldsTypes } from './types'\n\nexport class BrowserOptions extends BaseOptions<BrowserOptionsFieldsTypes> {\n  /**\n   * 静默监控xhr事件\n   */\n  silentXhr: boolean\n  /**\n   * 静默监控fetch事件\n   */\n  silentFetch: boolean\n  /**\n   * 静默监控console事件\n   */\n  silentConsole: boolean\n  /**\n   * 静默监控Dom事件\n   */\n  silentDom: boolean\n  /**\n   * 静默监控history事件\n   */\n  silentHistory: boolean\n  /**\n   * 静默监控error事件\n   */\n  silentError: boolean\n  /**\n   * 静默监控unhandledrejection事件\n   */\n  silentUnhandledrejection: boolean\n  /**\n   * 静默监控hashchange事件\n   */\n  silentHashchange: boolean\n  useImgUpload: boolean\n  configReportXhr: unknown = null\n  constructor(options: BrowserOptionsFieldsTypes) {\n    super()\n    super.bindOptions(options)\n    this.bindOptions(options)\n  }\n  bindOptions(options: BrowserOptionsFieldsTypes) {\n    const {\n      silentXhr,\n      silentFetch,\n      silentConsole,\n      silentDom,\n      silentHistory,\n      silentError,\n      silentHashchange,\n      silentUnhandledrejection,\n      useImgUpload,\n      configReportXhr\n    } = options\n    const booleanType = ToStringTypes.Boolean\n    const optionArr = [\n      [silentXhr, 'silentXhr', booleanType],\n      [silentFetch, 'silentFetch', booleanType],\n      [silentConsole, 'silentConsole', booleanType],\n      [silentDom, 'silentDom', booleanType],\n      [silentHistory, 'silentHistory', booleanType],\n      [silentError, 'silentError', booleanType],\n      [silentHashchange, 'silentHashchange', booleanType],\n      [silentUnhandledrejection, 'silentUnhandledrejection', booleanType],\n      [useImgUpload, 'useImgUpload', booleanType],\n      [configReportXhr, 'configReportXhr', ToStringTypes.Function]\n    ]\n    validateOptionsAndSet.call(this, optionArr)\n  }\n}\n","import { MethodTypes, ToStringTypes } from '@wtjs/shared'\nimport { BrowserOptionsFieldsTypes } from './types'\nimport { safeStringify, toStringValidateOption } from '@wtjs/utils'\nimport { ReportDataType } from '@wtjs/types'\nimport { BaseTransport } from '@wtjs/core'\n\nexport class BrowserTransport extends BaseTransport<BrowserOptionsFieldsTypes> {\n  configReportXhr: unknown\n  useImgUpload = false\n  constructor(options: BrowserOptionsFieldsTypes = {}) {\n    super()\n    super.bindOptions(options)\n    this.bindOptions(options)\n  }\n  post(data: any, url: string) {\n    const requestFun = (): void => {\n      const xhr = new XMLHttpRequest()\n      xhr.open(MethodTypes.Post, url)\n      xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8')\n      xhr.withCredentials = true\n      if (typeof this.configReportXhr === 'function') {\n        this.configReportXhr(xhr, data)\n      }\n      xhr.send(safeStringify(data))\n    }\n    this.queue.addTask(requestFun)\n  }\n  imgRequest(data: any, url: string): void {\n    const requestFun = () => {\n      let img = new Image()\n      const spliceStr = url.indexOf('?') === -1 ? '?' : '&'\n      img.src = `${url}${spliceStr}data=${encodeURIComponent(safeStringify(data))}`\n      img = null\n    }\n    this.queue.addTask(requestFun)\n  }\n  sendToServer(data: any, url: string) {\n    return this.useImgUpload ? this.imgRequest(data, url) : this.post(data, url)\n  }\n  getTransportData(data: ReportDataType) {\n    return {\n      authInfo: this.getAuthInfo(),\n      data\n    }\n  }\n  bindOptions(options: BrowserOptionsFieldsTypes = {}) {\n    const { configReportXhr, useImgUpload } = options\n    toStringValidateOption(configReportXhr, 'configReportXhr', ToStringTypes.Function) && (this.configReportXhr = configReportXhr)\n    toStringValidateOption(useImgUpload, 'useImgUpload', ToStringTypes.Boolean) && (this.useImgUpload = useImgUpload)\n  }\n}\n","import { Breadcrumb, BaseClient } from '@wtjs/core'\nimport {\n  BrowserBreadcrumbTypes,\n  BrowserEventTypes,\n  ErrorTypes,\n  EventTypes,\n  MitoLog,\n  MitoLogEmptyMsg,\n  MitoLogEmptyTag,\n  Silent\n} from '@wtjs/shared'\nimport {\n  extractErrorStack,\n  firstStrtoUppercase,\n  getBreadcrumbCategoryInBrowser,\n  getLocationHref,\n  getTimestamp,\n  isError,\n  Severity,\n  unknownToString\n} from '@wtjs/utils'\nimport { LogTypes } from '@wtjs/types'\nimport { BrowserOptions } from './browserOptions'\nimport { BrowserTransport } from './browserTransport'\nimport { BrowserOptionsFieldsTypes } from './types'\n\nexport class BrowserClient extends BaseClient<BrowserOptionsFieldsTypes, EventTypes> {\n  transport: BrowserTransport\n  declare options: BrowserOptions\n  breadcrumb: Breadcrumb<BrowserOptionsFieldsTypes>\n  constructor(options: BrowserOptionsFieldsTypes = {}) {\n    super(options)\n    this.options = new BrowserOptions(options)\n    this.transport = new BrowserTransport(options)\n    this.breadcrumb = new Breadcrumb(options)\n  }\n  /**\n   * 判断当前插件是否启用，用于browser的option\n   *\n   * @param {BrowserEventTypes} name\n   * @return {*}\n   * @memberof BrowserClient\n   */\n  isPluginEnable(name: BrowserEventTypes): boolean {\n    const silentField = `${Silent}${firstStrtoUppercase(name)}`\n    return !this.options[silentField]\n  }\n  log(data: LogTypes) {\n    const { message = MitoLogEmptyMsg, tag = MitoLogEmptyTag, level = Severity.Critical, ex = '' } = data\n    let errorInfo = {}\n    if (isError(ex)) {\n      errorInfo = extractErrorStack(ex, level)\n    }\n    const error = {\n      type: ErrorTypes.LOG,\n      level,\n      message: unknownToString(message),\n      name: MitoLog,\n      customTag: unknownToString(tag),\n      time: getTimestamp(),\n      url: getLocationHref(),\n      ...errorInfo\n    }\n    const breadcrumbStack = this.breadcrumb.push({\n      type: BrowserBreadcrumbTypes.CUSTOMER,\n      category: getBreadcrumbCategoryInBrowser(BrowserBreadcrumbTypes.CUSTOMER),\n      data: message,\n      level: Severity.fromString(level.toString())\n    })\n    this.transport.send(error, breadcrumbStack)\n  }\n}\n","import { BrowserBreadcrumbTypes } from '@wtjs/shared'\nimport { getBreadcrumbCategoryInBrowser, Severity } from '@wtjs/utils'\nimport { BrowserClient } from './browserClient'\n\nexport function addBreadcrumbInBrowser(\n  this: BrowserClient,\n  data: any,\n  type: BrowserBreadcrumbTypes,\n  level = Severity.Info,\n  params: any = {}\n) {\n  return this.breadcrumb.push({\n    type,\n    data,\n    category: getBreadcrumbCategoryInBrowser(type),\n    level,\n    ...params\n  })\n}\n","import { BREADCRUMBCATEGORYS, BrowserBreadcrumbTypes, BrowserEventTypes, ErrorTypes, globalVar, HttpTypes, HTTP_CODE } from '@wtjs/shared'\nimport {\n  getTimestamp,\n  replaceOld,\n  Severity,\n  _global,\n  variableTypeDetection,\n  on,\n  fromHttpStatus,\n  SpanStatus,\n  getLocationHref,\n  getRealPath\n} from '@wtjs/utils'\nimport { BasePluginType, HttpCollectedType, HttpTransformedType, MITOXMLHttpRequest, voidFun } from '@wtjs/types'\nimport { BrowserClient } from '../browserClient'\nimport { addBreadcrumbInBrowser } from '../utils'\n\nconst xhrPlugin: BasePluginType<BrowserEventTypes, BrowserClient> = {\n  name: BrowserEventTypes.XHR,\n  monitor(notify) {\n    monitorXhr.call(this, notify)\n  },\n  transform(collectedData: HttpCollectedType) {\n    return httpTransform(collectedData)\n  },\n  consumer(transformedData: HttpTransformedType) {\n    httpTransformedDataConsumer.call(this, transformedData)\n  }\n}\n\nfunction monitorXhr(this: BrowserClient, notify: (eventName: BrowserEventTypes, data: any) => void) {\n  const { options, transport } = this\n  if (!('XMLHttpRequest' in _global)) {\n    return\n  }\n  const originalXhrProto = XMLHttpRequest.prototype\n  replaceOld(originalXhrProto, 'open', (originalOpen: voidFun): voidFun => {\n    return function (this: MITOXMLHttpRequest, ...args: any[]): void {\n      this.httpCollect = {\n        request: {\n          httpType: HttpTypes.XHR,\n          method: variableTypeDetection.isString(args[0]) ? args[0].toUpperCase() : args[0],\n          url: args[1]\n        },\n        response: {},\n        time: getTimestamp()\n      }\n      originalOpen.apply(this, args)\n    }\n  })\n  replaceOld(originalXhrProto, 'send', (originalSend: voidFun): voidFun => {\n    return function (this: MITOXMLHttpRequest, ...args: any[]): void {\n      const { request } = this.httpCollect\n      const { method, url } = request\n      options.setTraceId(url, (headerFieldName: string, traceId: string) => {\n        request.traceId = traceId\n        this.setRequestHeader(headerFieldName, traceId)\n      })\n      options.beforeAppAjaxSend && options.beforeAppAjaxSend({ method, url }, this)\n      on(this, 'loadend', function (this: MITOXMLHttpRequest) {\n        const isBlock = transport.isSelfDsn(url) || options.isFilterHttpUrl(url)\n        if (isBlock) return\n        const { responseType, response, status } = this\n        request.data = args[0]\n        const eTime = getTimestamp()\n        if (['', 'json', 'text'].indexOf(responseType) !== -1) {\n          this.httpCollect.response.data = typeof response === 'object' ? JSON.stringify(response) : response\n        }\n        this.httpCollect.response.status = status\n        this.httpCollect.elapsedTime = eTime - this.httpCollect.time\n        notify(BrowserEventTypes.XHR, this.httpCollect)\n      })\n      originalSend.apply(this, args)\n    }\n  })\n}\n\nexport function httpTransform(httpCollectedData: HttpCollectedType): HttpTransformedType {\n  let message = ''\n  const {\n    request: { httpType, method, url },\n    response: { status },\n    elapsedTime\n  } = httpCollectedData\n  const name = `${httpType}--${method}`\n  if (status === 0) {\n    message =\n      elapsedTime <= globalVar.crossOriginThreshold ? 'http请求失败，失败原因：跨域限制或域名不存在' : 'http请求失败，失败原因：超时'\n  } else {\n    message = fromHttpStatus(status)\n  }\n  message = message === SpanStatus.Ok ? message : `${message} ${getRealPath(url)}`\n  return {\n    ...httpCollectedData,\n    type: ErrorTypes.HTTP,\n    url: getLocationHref(),\n    level: Severity.Low,\n    message,\n    name\n  }\n}\n\nexport function httpTransformedDataConsumer(this: BrowserClient, transformedData: HttpTransformedType) {\n  const type = transformedData.request.httpType === HttpTypes.FETCH ? BrowserBreadcrumbTypes.FETCH : BrowserBreadcrumbTypes.XHR\n  // time 是为了保持顺序，紧跟在点击事件后面\n  const {\n    response: { status },\n    time\n  } = transformedData\n  const isError = status === 0 || status === HTTP_CODE.BAD_REQUEST || status > HTTP_CODE.UNAUTHORIZED\n  addBreadcrumbInBrowser.call(this, transformedData, type, Severity.Info, { time })\n  if (isError) {\n    const breadcrumStack = this.breadcrumb.push({\n      type,\n      category: BREADCRUMBCATEGORYS.EXCEPTION,\n      data: transformedData,\n      level: Severity.Error,\n      time\n    })\n    this.transport.send(transformedData, breadcrumStack)\n  }\n}\n\nexport default xhrPlugin\n","export const enum SpanStatus {\n  /** The operation completed successfully. */\n  Ok = 'ok',\n  /** Deadline expired before operation could complete. */\n  DeadlineExceeded = 'deadline_exceeded',\n  /** 401 Unauthorized (actually does mean unauthenticated according to RFC 7235) */\n  Unauthenticated = 'unauthenticated',\n  /** 403 Forbidden */\n  PermissionDenied = 'permission_denied',\n  /** 404 Not Found. Some requested entity (file or directory) was not found. */\n  NotFound = 'not_found',\n  /** 429 Too Many Requests */\n  ResourceExhausted = 'resource_exhausted',\n  /** Client specified an invalid argument. 4xx. */\n  InvalidArgument = 'invalid_argument',\n  /** 501 Not Implemented */\n  Unimplemented = 'unimplemented',\n  /** 503 Service Unavailable */\n  Unavailable = 'unavailable',\n  /** Other/generic 5xx. */\n  InternalError = 'internal_error',\n  /** Unknown. Any non-standard HTTP status code. */\n  UnknownError = 'unknown_error',\n  /** The operation was cancelled (typically by the user). */\n  Cancelled = 'cancelled',\n  /** Already exists (409) */\n  AlreadyExists = 'already_exists',\n  /** Operation was rejected because the system is not in a state required for the operation's */\n  FailedPrecondition = 'failed_precondition',\n  /** The operation was aborted, typically due to a concurrency issue. */\n  Aborted = 'aborted',\n  /** Operation was attempted past the valid range. */\n  OutOfRange = 'out_of_range',\n  /** Unrecoverable data loss or corruption */\n  DataLoss = 'data_loss'\n}\n\nexport function fromHttpStatus(httpStatus: number) {\n  if (httpStatus < 400) {\n    return SpanStatus.Ok\n  }\n\n  if (httpStatus >= 400 && httpStatus < 500) {\n    switch (httpStatus) {\n      case 401:\n        return SpanStatus.Unauthenticated\n      case 403:\n        return SpanStatus.PermissionDenied\n      case 404:\n        return SpanStatus.NotFound\n      case 409:\n        return SpanStatus.AlreadyExists\n      case 413:\n        return SpanStatus.FailedPrecondition\n      case 429:\n        return SpanStatus.ResourceExhausted\n      default:\n        return SpanStatus.InvalidArgument\n    }\n  }\n\n  if (httpStatus >= 500 && httpStatus < 600) {\n    switch (httpStatus) {\n      case 501:\n        return SpanStatus.Unimplemented\n      case 503:\n        return SpanStatus.Unavailable\n      case 504:\n        return SpanStatus.DeadlineExceeded\n      default:\n        return SpanStatus.InternalError\n    }\n  }\n\n  return SpanStatus.UnknownError\n}\n","import { BrowserEventTypes, HttpTypes } from '@wtjs/shared'\nimport { getTimestamp, replaceOld, _global } from '@wtjs/utils'\nimport { BasePluginType, HttpCollectedType, HttpTransformedType, voidFun } from '@wtjs/types'\nimport { BrowserClient } from '../browserClient'\nimport { httpTransform, httpTransformedDataConsumer } from './xhr'\n\nconst fetchPlugin: BasePluginType<BrowserEventTypes, BrowserClient> = {\n  name: BrowserEventTypes.FETCH,\n  monitor(notify) {\n    monitorFetch.call(this, notify)\n  },\n  transform(collectedData: HttpCollectedType) {\n    return httpTransform(collectedData)\n  },\n  consumer(transformedData: HttpTransformedType) {\n    httpTransformedDataConsumer.call(this, transformedData)\n  }\n}\n\nfunction monitorFetch(this: BrowserClient, notify: (eventName: BrowserEventTypes, data: any) => void) {\n  const { options, transport } = this\n  if (!('fetch' in _global)) {\n    return\n  }\n  replaceOld(_global, BrowserEventTypes.FETCH, (originalFetch: voidFun) => {\n    return function (url: string, config: Partial<Request> = {}): void {\n      const sTime = getTimestamp()\n      const method = (config && config.method) || 'GET'\n      const httpCollect: HttpCollectedType = {\n        request: {\n          httpType: HttpTypes.FETCH,\n          url,\n          method,\n          data: config && config.body\n        },\n        time: sTime,\n        response: {}\n      }\n      const headers = new Headers(config.headers || {})\n      Object.assign(headers, {\n        setRequestHeader: headers.set\n      })\n      options.setTraceId(url, (headerFieldName: string, traceId: string) => {\n        httpCollect.request.traceId = traceId\n        headers.set(headerFieldName, traceId)\n      })\n      options.beforeAppAjaxSend && options.beforeAppAjaxSend({ method, url }, headers)\n      config = {\n        ...config,\n        headers\n      }\n      const isBlock = transport.isSelfDsn(url) || options.isFilterHttpUrl(url)\n      return originalFetch.apply(_global, [url, config]).then(\n        (res: Response) => {\n          const resClone = res.clone()\n          const eTime = getTimestamp()\n          httpCollect.elapsedTime = eTime - sTime\n          httpCollect.response.status = resClone.status\n          resClone.text().then((data) => {\n            if (isBlock) return\n            httpCollect.response.data = data\n            notify(BrowserEventTypes.FETCH, httpCollect)\n          })\n          return res\n        },\n        (err: Error) => {\n          if (isBlock) return\n          const eTime = getTimestamp()\n          httpCollect.elapsedTime = eTime - sTime\n          httpCollect.response.status = 0\n          notify(BrowserEventTypes.FETCH, httpCollect)\n          throw err\n        }\n      )\n    }\n  })\n}\n\nexport default fetchPlugin\n","import { BrowserBreadcrumbTypes, BrowserEventTypes } from '@wtjs/shared'\nimport { htmlElementAsString, on, throttle, _global } from '@wtjs/utils'\nimport { BasePluginType } from '@wtjs/types'\nimport { BrowserClient } from '../browserClient'\nimport { addBreadcrumbInBrowser } from '../utils'\n\nexport interface DomCollectedType {\n  // maybe will add doubleClick or other in the future\n  category: 'click'\n  data: Document\n}\nconst domPlugin: BasePluginType<BrowserEventTypes, BrowserClient> = {\n  name: BrowserEventTypes.DOM,\n  monitor(notify) {\n    if (!('document' in _global)) return\n    const clickThrottle = throttle(notify, this.options.throttleDelayTime)\n    on(\n      _global.document,\n      'click',\n      function () {\n        clickThrottle(BrowserEventTypes.DOM, {\n          category: 'click',\n          data: this\n        })\n      },\n      true\n    )\n  },\n  transform(collectedData: DomCollectedType) {\n    const htmlString = htmlElementAsString(collectedData.data.activeElement as HTMLElement)\n    return htmlString\n  },\n  consumer(transformedData: string) {\n    if (transformedData) {\n      addBreadcrumbInBrowser.call(this, transformedData, BrowserBreadcrumbTypes.CLICK)\n    }\n  }\n}\n\nexport default domPlugin\n","import { BrowserBreadcrumbTypes, BrowserEventTypes, ErrorTypes, ERROR_TYPE_RE } from '@wtjs/shared'\nimport { extractErrorStack, getLocationHref, getTimestamp, interceptStr, isError, on, Severity, _global } from '@wtjs/utils'\nimport { BasePluginType, ReportDataType } from '@wtjs/types'\nimport { BrowserClient } from '../browserClient'\nimport { addBreadcrumbInBrowser } from '../utils'\n\nexport interface ResourceErrorTarget {\n  src?: string\n  href?: string\n  localName?: string\n}\n\nconst errorPlugin: BasePluginType<BrowserEventTypes, BrowserClient> = {\n  name: BrowserEventTypes.ERROR,\n  monitor(notify) {\n    on(\n      _global,\n      'error',\n      function (e: ErrorEvent) {\n        notify(BrowserEventTypes.ERROR, e)\n      },\n      true\n    )\n  },\n  transform(errorEvent: ErrorEvent) {\n    const target = errorEvent.target as ResourceErrorTarget\n    if (target.localName) {\n      // resource error\n      return resourceTransform(errorEvent.target as ResourceErrorTarget)\n    }\n    // code error\n    return codeErrorTransform(errorEvent)\n  },\n  consumer(transformedData: ReportDataType) {\n    const type = transformedData.type === ErrorTypes.RESOURCE ? BrowserBreadcrumbTypes.RESOURCE : BrowserBreadcrumbTypes.CODE_ERROR\n    const breadcrumbStack = addBreadcrumbInBrowser.call(this, transformedData, type, Severity.Error)\n    this.transport.send(transformedData, breadcrumbStack)\n  }\n}\n\nconst resourceMap = {\n  img: '图片',\n  script: 'JS脚本'\n}\n\nfunction resourceTransform(target: ResourceErrorTarget) {\n  return {\n    type: ErrorTypes.RESOURCE,\n    url: getLocationHref(),\n    message: '资源地址: ' + (interceptStr(target.src, 120) || interceptStr(target.href, 120)),\n    level: Severity.Low,\n    time: getTimestamp(),\n    name: `${resourceMap[target.localName] || target.localName}加载失败`\n  }\n}\n\nfunction codeErrorTransform(errorEvent: ErrorEvent) {\n  const { message, filename, lineno, colno, error } = errorEvent\n  let result: ReportDataType\n  if (error && isError(error)) {\n    result = extractErrorStack(error, Severity.Normal)\n  }\n  result || (result = handleNotErrorInstance(message, filename, lineno, colno))\n  result.type = ErrorTypes.JAVASCRIPT\n  return result\n}\n\nfunction handleNotErrorInstance(message: string, filename: string, lineno: number, colno: number) {\n  let name: string | ErrorTypes = ErrorTypes.UNKNOWN\n  const url = filename || getLocationHref()\n  let msg = message\n  const matches = message.match(ERROR_TYPE_RE)\n  if (matches[1]) {\n    name = matches[1]\n    msg = matches[2]\n  }\n  const element = {\n    url,\n    func: ErrorTypes.UNKNOWN_FUNCTION,\n    args: ErrorTypes.UNKNOWN,\n    line: lineno,\n    col: colno\n  }\n  return {\n    url,\n    name,\n    message: msg,\n    level: Severity.Normal,\n    time: getTimestamp(),\n    stack: [element]\n  }\n}\nexport default errorPlugin\n","import { BrowserBreadcrumbTypes, BrowserEventTypes } from '@wtjs/shared'\nimport { isExistProperty, on, parseUrlToObj, _global } from '@wtjs/utils'\nimport { BasePluginType, RouteChangeCollectType } from '@wtjs/types'\nimport { BrowserClient } from '../browserClient'\nimport { addBreadcrumbInBrowser } from '../utils'\n\nconst hashRoutePlugin: BasePluginType<BrowserEventTypes, BrowserClient> = {\n  name: BrowserEventTypes.HASHCHANGE,\n  monitor(notify) {\n    if (!isExistProperty(_global, 'onpopstate')) {\n      on(_global, BrowserEventTypes.HASHCHANGE, function (e: HashChangeEvent) {\n        const { oldURL: from, newURL: to } = e\n        notify(BrowserEventTypes.HASHCHANGE, { from, to })\n      })\n    }\n  },\n  transform(collectedData: RouteChangeCollectType) {\n    return routeTransform(collectedData)\n  },\n  consumer(transformedData: RouteChangeCollectType) {\n    routeTransformedConsumer.call(this, transformedData)\n  }\n}\n\nexport function routeTransform(collectedData: RouteChangeCollectType): RouteChangeCollectType {\n  const { from, to } = collectedData\n  const { relative: parsedFrom } = parseUrlToObj(from)\n  const { relative: parsedTo } = parseUrlToObj(to)\n  return {\n    from: parsedFrom ? parsedFrom : '/',\n    to: parsedTo ? parsedTo : '/'\n  }\n}\n\nexport function routeTransformedConsumer(this: BrowserClient, transformedData: RouteChangeCollectType) {\n  if (transformedData.from === transformedData.to) return\n  addBreadcrumbInBrowser.call(this, transformedData, BrowserBreadcrumbTypes.ROUTE)\n}\n\nexport default hashRoutePlugin\n","import { BrowserEventTypes } from '@wtjs/shared'\nimport { getLocationHref, replaceOld, supportsHistory, _global } from '@wtjs/utils'\nimport { BasePluginType, RouteChangeCollectType, voidFun } from '@wtjs/types'\nimport { BrowserClient } from '../browserClient'\nimport { routeTransform, routeTransformedConsumer } from './hashRoute'\n\nconst historyRoutePlugin: BasePluginType<BrowserEventTypes, BrowserClient> = {\n  name: BrowserEventTypes.HISTORY,\n  monitor(notify) {\n    let lastHref: string\n    if (!supportsHistory()) return\n    const oldOnpopstate = _global.onpopstate\n    _global.onpopstate = function (this: WindowEventHandlers, ...args: any[]): any {\n      const to = getLocationHref()\n      const from = lastHref\n      lastHref = to\n      notify(BrowserEventTypes.HISTORY, {\n        from,\n        to\n      })\n      oldOnpopstate && oldOnpopstate.apply(this, args)\n    }\n    function historyReplaceFn(originalHistoryFn: voidFun): voidFun {\n      return function (this: History, ...args: any[]): void {\n        const url = args.length > 2 ? args[2] : undefined\n        if (url) {\n          const from = lastHref\n          const to = String(url)\n          lastHref = to\n          notify(BrowserEventTypes.HISTORY, {\n            from,\n            to\n          })\n        }\n        return originalHistoryFn.apply(this, args)\n      }\n    }\n    // 以下两个事件是人为调用，但是不触发onpopstate\n    replaceOld(_global.history, 'pushState', historyReplaceFn)\n    replaceOld(_global.history, 'replaceState', historyReplaceFn)\n  },\n  transform(collectedData: RouteChangeCollectType) {\n    return routeTransform(collectedData)\n  },\n  consumer(transformedData: RouteChangeCollectType) {\n    routeTransformedConsumer.call(this, transformedData)\n  }\n}\n\nexport default historyRoutePlugin\n","import { BrowserBreadcrumbTypes, BrowserEventTypes, globalVar } from '@wtjs/shared'\nimport { replaceOld, Severity, _global } from '@wtjs/utils'\nimport { BasePluginType, ConsoleCollectType } from '@wtjs/types'\nimport { BrowserClient } from '../browserClient'\nimport { addBreadcrumbInBrowser } from '../utils'\nconst consolePlugin: BasePluginType<BrowserEventTypes, BrowserClient> = {\n  name: BrowserEventTypes.CONSOLE,\n  monitor(notify) {\n    if (!('console' in _global)) {\n      return\n    }\n    const logType = ['log', 'debug', 'info', 'warn', 'error', 'assert']\n    logType.forEach(function (level: string): void {\n      if (!(level in _global.console)) return\n      replaceOld(_global.console, level, function (originalConsole: () => any): Function {\n        return function (...args: any[]): void {\n          if (originalConsole) {\n            notify(BrowserEventTypes.CONSOLE, { args, level })\n            originalConsole.apply(_global.console, args)\n          }\n        }\n      })\n    })\n  },\n  transform(collectedData: ConsoleCollectType) {\n    return collectedData\n  },\n  consumer(transformedData: ConsoleCollectType) {\n    if (globalVar.isLogAddBreadcrumb) {\n      addBreadcrumbInBrowser.call(this, transformedData, BrowserBreadcrumbTypes.CONSOLE, Severity.fromString(transformedData.level))\n    }\n  }\n}\n\nexport default consolePlugin\n","import { BrowserBreadcrumbTypes, BrowserEventTypes, ErrorTypes } from '@wtjs/shared'\nimport { extractErrorStack, getLocationHref, getTimestamp, isError, on, Severity, unknownToString, _global } from '@wtjs/utils'\nimport { BasePluginType, HttpTransformedType, ReportDataType } from '@wtjs/types'\nimport { BrowserClient } from '../browserClient'\nimport { addBreadcrumbInBrowser } from '../utils'\n\nconst name = BrowserEventTypes.UNHANDLEDREJECTION\nconst unhandlerejectionPlugin: BasePluginType<BrowserEventTypes, BrowserClient> = {\n  name,\n  monitor(notify) {\n    on(_global, name, function (ev: PromiseRejectionEvent) {\n      // ev.preventDefault() 阻止默认行为后，控制台就不会再报红色错误\n      notify(name, ev)\n    })\n  },\n  transform(collectedData: PromiseRejectionEvent) {\n    let data: ReportDataType = {\n      type: ErrorTypes.PROMISE,\n      message: unknownToString(collectedData.reason),\n      url: getLocationHref(),\n      name: collectedData.type,\n      time: getTimestamp(),\n      level: Severity.Low\n    }\n    if (isError(collectedData.reason)) {\n      data = {\n        ...data,\n        ...extractErrorStack(collectedData.reason, Severity.Low)\n      }\n    }\n    return data\n  },\n  consumer(transformedData: HttpTransformedType) {\n    const breadcrumbStack = addBreadcrumbInBrowser.call(this, transformedData, BrowserBreadcrumbTypes.UNHANDLEDREJECTION, Severity.Error)\n    this.transport.send(transformedData, breadcrumbStack)\n  }\n}\n\nexport default unhandlerejectionPlugin\n","export * from './types'\nimport { BrowserClient } from './browserClient'\nimport { BrowserOptionsFieldsTypes } from './types'\nimport fetchPlugin from './plugins/fetch'\nimport xhrPlugin from './plugins/xhr'\nimport domPlugin from './plugins/dom'\nimport errorPlugin from './plugins/error'\nimport hashRoutePlugin from './plugins/hashRoute'\nimport historyRoutePlugin from './plugins/historyRoute'\nimport consolePlugin from './plugins/console'\nimport unhandlerejectionPlugin from './plugins/unhandlerejecttion'\nimport { BasePluginType } from '@wtjs/types'\nfunction createBrowserInstance(options: BrowserOptionsFieldsTypes = {}, plugins: BasePluginType[] = []) {\n  const browserClient:any = new BrowserClient(options)\n  const browserPlugins = [\n    fetchPlugin,\n    xhrPlugin,\n    domPlugin,\n    errorPlugin,\n    hashRoutePlugin,\n    historyRoutePlugin,\n    consolePlugin,\n    unhandlerejectionPlugin\n  ]\n  browserClient.use([...browserPlugins, ...plugins])\n  return browserClient\n}\n\n\nconst init = createBrowserInstance\nexport { createBrowserInstance, init, BrowserClient }\n"],"names":["_arrayLikeToArray","arr","len","length","i","arr2","Array","_unsupportedIterableToArray","o","minLen","arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","_toConsumableArray","isArray","arrayWithoutHoles","iter","Symbol","iterator","iterableToArray","unsupportedIterableToArray","TypeError","nonIterableSpread","_classCallCheck","instance","Constructor","_typeof","toPropertyKey","t","r","e","toPrimitive","String","Number","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","assertThisInitialized","_getPrototypeOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_setPrototypeOf","p","_inherits","subClass","superClass","create","value","_defineProperty","obj","_slicedToArray","arrayWithHoles","l","u","a","f","next","done","push","iterableToArrayLimit","nonIterableRest","SDK_VERSION","ERROR_TYPE_RE","globalVar","isLogAddBreadcrumb","crossOriginThreshold","nativeToString","isType","type","concat","variableTypeDetection","isNumber","isString","isBoolean","isNull","isUndefined","isSymbol","isFunction","isObject","isProcess","isWindow","isError","wat","base","_e","isInstanceOf","Error","isNodeEnv","process","isWxMiniEnv","wx","App","isBrowserEnv","window","_global","_support","__MITO__","PREFIX","Logger","_this","this","console","forEach","level","_console","enabled","debug","_this$_console","_len","arguments","args","_key","log","apply","_this$_console2","_len2","_key2","warn","_this$_console3","_len3","_key3","error","logger","getLocationHref","document","location","href","getUrlWithEnv","getCurrentPages","pages","currentPage","pop","url","query","queryArr","keys","k","indexOf","join","setUrlQuery","route","options","getCurrentRoute","on","eventName","handler","opitons","undefined","addEventListener","replaceOld","source","replacement","wrapped","defaultFunctionName","getTimestamp","Date","now","toStringValidateOption","targetName","expectType","toStringAny","unknownToString","JSON","stringify","interceptStr","str","interceptLength","safeStringify","set","Set","has","add","clear","validateOptionsAndSet","targetArr","_ref","_ref2","parseUrlToObj","match","fragment","host","path","protocol","relative","getBreadcrumbCategoryInBrowser","extractErrorStack","ex","normal","time","message","stack","submatch","parts","element","chrome","gecko","winjs","geckoEval","chromeEval","lines","split","j","exec","isNative","func","line","column","columnNumber","_objectSpread","Severity","Queue","micro","Promise","resolve","fn","isFlushing","then","flushStack","temp","_step","_iterator","_createForOfIteratorHelper","s","err","fromString","Debug","Info","Warning","Low","Normal","High","Critical","Else","allErrorNumber","createErrorId","data","apikey","maxDuplicateCount","id","request","method","response","status","getRealPath","customTag","locationUrl","stringToObjAndOrder","generatePromiseErrorId","hash","charCodeAt","hashCode","sortObjByKey","sort","reduce","total","reason","parse","replace","Breadcrumb","bindOptions","callback","beforePushBreadcrumb","result","immediatePush","maxBreadcrumbs","shift","b","Subscribe","Map","callBack","fns","dep","get","errorFn","nativeTryCatch","getFunctionName","BaseClient","plugins","disabled","subscribe","item","isPluginEnable","monitor","notify","watch","_item$transform","_item$consumer","res","transform","consumer","BaseOptions","enableTraceId","vue","filterXhrUrlRegExp","optionArr","traceIdFieldName","throttleDelayTime","includeHttpUrlTraceIdRegExp","beforeAppAjaxSend","httpUrl","d","traceId","getTime","c","Math","random","floor","asyncGeneratorStep","gen","reject","_next","_throw","arg","info","module","exports","__esModule","require$$0","_regeneratorRuntime","hasOwnProperty","asyncIterator","toStringTag","define","wrap","Generator","Context","makeInvokeMethod","tryCatch","h","y","GeneratorFunction","GeneratorFunctionPrototype","v","values","g","defineIteratorMethods","_invoke","AsyncIterator","invoke","__await","callInvokeWithMethodAndArg","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","resultName","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","mark","awrap","async","reverse","prev","charAt","stop","rval","handle","complete","finish","catch","delegateYield","runtime","regenerator","regeneratorRuntime","accidentalStrictMode","globalThis","Function","BaseTransport","queue","_send","trackerId","getTrackerId","sdkVersion","sdkName","backTrackerId","targetUrl","dsn","origin","beforeDataReport","functionType","configReportUrl","_callee","breadcrumb","errorId","transportData","_args","_context","isTrack","getTransportData","trim","sendToServer","_x","_get","Reflect","property","receiver","object","superPropBase","desc","getOwnPropertyDescriptor","BrowserOptions","_BaseOptions","_thisSuper","_callSuper","booleanType","silentXhr","silentFetch","silentConsole","silentDom","silentHistory","silentError","silentHashchange","silentUnhandledrejection","useImgUpload","configReportXhr","BrowserTransport","_BaseTransport","_this2","addTask","xhr","XMLHttpRequest","open","setRequestHeader","withCredentials","send","img","Image","spliceStr","src","encodeURIComponent","imgRequest","post","authInfo","getAuthInfo","BrowserClient","_BaseClient","transport","silentField","$0","$1","$2","toUpperCase","_data$message","MitoLogEmptyMsg","_data$tag","tag","MitoLogEmptyTag","_data$level","_data$ex","errorInfo","breadcrumbStack","category","addBreadcrumbInBrowser","params","xhrPlugin","monitorXhr","collectedData","httpTransform","transformedData","httpTransformedDataConsumer","originalXhrProto","originalOpen","httpCollect","httpType","originalSend","setTraceId","headerFieldName","isSelfDsn","isFilterHttpUrl","responseType","eTime","elapsedTime","httpCollectedData","_httpCollectedData$re","httpStatus","fromHttpStatus","breadcrumStack","fetchPlugin","monitorFetch","originalFetch","config","sTime","body","headers","Headers","assign","isBlock","resClone","clone","text","domPlugin","delay","canRun","clickThrottle","setTimeout","tagName","toLowerCase","classNames","classList","innerText","htmlElementAsString","activeElement","errorPlugin","errorEvent","localName","resourceMap","resourceTransform","filename","lineno","colno","msg","matches","col","handleNotErrorInstance","codeErrorTransform","script","hashRoutePlugin","oldURL","to","newURL","routeTransform","routeTransformedConsumer","parsedFrom","parsedTo","historyRoutePlugin","lastHref","isChromePackagedApp","app","hasHistoryApi","history","pushState","replaceState","oldOnpopstate","onpopstate","historyReplaceFn","originalHistoryFn","consolePlugin","originalConsole","unhandlerejectionPlugin","ev","createBrowserInstance","browserClient","browserPlugins","use","init"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,36,37,38,39,41,42]}